<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
      <title>主题 on Daniex </title>
      <generator uri="https://hugo.spf13.com">Hugo</generator>
    <link>http://www.daniex.tk/tags/E4B8BBE9A298/index.xml/</link>
    <language>zh-cn</language>
    <author>Daniex</author>
    
    <updated>Fri, 27 Jan 2012 11:58:33 &#43;0000</updated>
    
    <item>
      <title>使用JavaMail API</title>
      <link>http://www.daniex.tk/blog/2012/the-javamail-api/</link>
      <pubDate>Fri, 27 Jan 2012 11:58:33 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2012/the-javamail-api/</guid>
      <description>&lt;p&gt;使用JavaMail API，接上文&lt;a title=&#34;javax.mail.internet API 学习&#34; href=&#34;http://daniex.info/javax-mail-internet-api.html&#34; target=&#34;_blank&#34;&gt;&lt;span style=&#34;color: #3366ff;&#34;&gt;javax.mail.internet api 学习&lt;/span&gt;
&lt;/a&gt;1．发送邮件
在获得了Session后，建立并填入邮件信息，然后发送它到邮件服务器。这便是使用Java Mail API发送邮件的过程，在发送邮件之前，我们需要设置SMTP服务器：通过设置Properties的mail.smtp.host属性。
&lt;blockquote&gt;String host = &amp;hellip;;
String from = &amp;hellip;;
String to = &amp;hellip;;
// Get system properties
Properties props = System.getProperties();
// Setup mail server
props.put(&amp;ldquo;mail.smtp.host&amp;rdquo;, host);
// Get session
Session session = Session.getDefaultInstance(props, null);// Define message
MimeMessage message = new MimeMessage(session);
message.setFrom(new InternetAddress(from));message.addRecipient(Message.RecipientType.TO,   new InternetAddress(to));message.setSubject(&amp;ldquo;Hello JavaMail&amp;rdquo;);
message.setText(&amp;ldquo;Welcome to JavaMail&amp;rdquo;);
// Send message
Transport.send(message);&lt;/blockquote&gt;
由于建立邮件信息和发送邮件的过程中可能会抛出异常，所以我们需要将上面的代码放入到try-catch结构块中。
2．接收邮件
为了在读取邮件，我们获得了session，并且连接到了邮箱的相应store，打开相应的Folder，然后得到我们想要的邮件，当然别忘记了在结束时关闭连接。
&lt;blockquote&gt;String host = &amp;hellip;;
String username = &amp;hellip;;
String password = &amp;hellip;;
// Create empty properties
Properties props = new Properties();
// Get session
Session session = Session.getDefaultInstance(props, null);
// Get the store
Store store = session.getStore(&amp;ldquo;pop3&amp;rdquo;);
store.connect(host, username, password);
// Get folder
Folder folder = store.getFolder(&amp;ldquo;INBOX&amp;rdquo;);
folder.open(Folder.READ_ONLY);
// Get directory
Message message[] = folder.getMessages();
for (int i=0, n=message.length; i++)&amp;hellip;&lt;/blockquote&gt;
上面的代码所作的是从邮箱中读取每个邮件，并且显示邮件的发信人地址和主题。从技术角度讲，这里存在着一个异常的可能：当发信人地址为空时，getFrom()[0]将抛出异常。&lt;/p&gt;

&lt;p&gt;下 面的代码片断有效的说明了如何读取邮件内容，在显示每个邮件发信人和主题后，将出现用户提示从而得到用户是否读取该邮件的确认，如果输入YES的话，我们 可用Message.writeTo(java.io.OutputStream os)方法将邮件内容输出到控制台上，关于 Message.writeTo()的具体用法请看JavaMail API。
&lt;blockquote&gt;BufferedReader reader = new BufferedReader (  new InputStreamReader(System.in));
// Get directory
Message message[] = folder.getMessages();
for (int i=0, n=message.length; i&amp;hellip;&lt;/blockquote&gt;
3．删除邮件和标志
设置与message相关的Flags是删除邮件的常用方法。这些Flags表示了一些系统定义和用户定义的不同状态。在Flags类的内部类Flag中预定义了一些标志：
&lt;blockquote&gt;Flags.Flag.ANSWERED
Flags.Flag.DELETED
Flags.Flag.DRAFT
Flags.Flag.FLAGGED
Flags.Flag.RECENT
Flags.Flag.SEEN
Flags.Flag.USER&lt;/blockquote&gt;
但 需要在使用时注意的：标志存在并非意味着这个标志被所有的邮件服务器所支持。例如，对于删除邮件的操作，POP协议不支持上面的任何一个。所以要确定哪些 标志是被支持的??通过访问一个已经打开的Folder对象的getPermanetFlags()方法，它将返回当前被支持的Flags类对象。
删除邮件时，我们可以设置邮件的DELETED标志：
&lt;blockquote&gt;message.setFlag(Flags.Flag.DELETED, true);&lt;/blockquote&gt;
但是首先要采用READ_WRITE的方式打开Folder：
&lt;blockquote&gt;folder.open(Folder.READ_WRITE);&lt;/blockquote&gt;
在对邮件进行删除操作后关闭Folder时，需要传递一个true作为对删除邮件的擦除确认。
&lt;blockquote&gt;folder.close(true);&lt;/blockquote&gt;
Folder类中另一种用于删除邮件的方法expunge()也同样可删除邮件，但是它并不为sun提供的POP3实现支持，而其它第三方提供的POP3实现支持或者并不支持这种方法。
另外，介绍一种检查某个标志是否被设置的方法：Message.isSet(Flags.Flag flag)方法，其中参数为被检查的标志。&lt;/p&gt;

&lt;p&gt;4．邮件认证
我 们在前面已经学会了如何使用Authenticator类来代替直接使用用户名和密码这两字符串作为 Session.getDefaultInstance()或者Session.getInstance()方法的参数。在前面的小试牛刀后，现在我们将 了解到全面认识一下邮件认证。
我们在此取代了直接使用邮件服务器主机名、用户名、密码这三个字符串作为连接到POP3 Store的方式，使用存储了邮件服务器主机名信息的属性文件，并在获得Session时传入自定义的Authenticator实例：
&lt;blockquote&gt;// Setup properties
Properties props = System.getProperties();
props.put(&amp;ldquo;mail.pop3.host&amp;rdquo;, host);
// Setup authentication, get session
Authenticator auth = new PopupAuthenticator();
Session session = Session.getDefaultInstance(props, auth);
// Get the store
Store store = session.getStore(&amp;ldquo;pop3&amp;rdquo;);
store.connect();&lt;/blockquote&gt;
PopupAuthenticator 类继承了抽象类Authenticator，并且通过重载Authenticator类的getPasswordAuthentication()方法返 回PasswordAuthentication类对象。而getPasswordAuthentication()方法的参数param是以逗号分割的 用户名、密码组成的字符串。
&lt;blockquote&gt;import javax.mail.&lt;em&gt;;
import java.util.&lt;/em&gt;;&lt;/p&gt;

&lt;p&gt;public class PopupAuthenticator extends Authenticator {
public PasswordAuthentication getPasswordAuthentication(String param) {
String username, password;
StringTokenizer st = new StringTokenizer(param, &amp;rdquo;,&amp;ldquo;);
username = st.nextToken();
password = st.nextToken();
return new PasswordAuthentication(username, password);
}
}&lt;/blockquote&gt;
5．回复邮件
回复邮件的方法很简单：使用Message类的reply()方法，通过配 置回复邮件的收件人地址和主题（如果没有提供主题的话，系统将默认将“Re：”作为邮件的主体），这里不需要设置任何的邮件内容，只要复制发信人或者 reply-to到新的收件人。而reply()方法中的boolean参数表示是否将邮件回复给发送者（参数值为false），或是恢复给所有人（参数 值为true）。
补充一下，reply-to地址需要在发信时使用setReplyTo()方法设置。
&lt;blockquote&gt;MimeMessage reply = (MimeMessage)message.reply(false);
reply.setFrom(new InternetAddress(&amp;ldquo;president@whitehouse.gov&amp;rdquo;));
reply.setText(&amp;ldquo;Thanks&amp;rdquo;);
Transport.send(reply);&lt;/blockquote&gt;
6．转发邮件
转发邮件的过程不如前面的回复邮件那样简单，它将建立一个转发邮件，这并非一个方法就能做到。
每 个邮件是由多个部分组成，每个部分称为一个邮件体部分，是一个BodyPart类对象，对于MIME类型邮件来讲就是MimeBodyPart类对象。这 些邮件体包含在成为Multipart的容器中对于MIME类型邮件来讲就是MimeMultiPart类对象。在转发邮件时，我们建立一个文字邮件体部 分和一个被转发的文字邮件体部分，然后将这两个邮件体放到一个Multipart中。说明一下，复制一个邮件内容到另一个邮件的方法是仅复制它的 DataHandler（数据处理者）即可。这是由JavaBeans Activation Framework定义的一个类，它提供了对邮件内容的操 作命令的访问、管理了邮件内容操作，是不同的数据源和数据格式之间的一致性接口。
&lt;blockquote&gt;// Create the message to forward
Message forward = new MimeMessage(session);
// Fill in header
forward.setSubject(&amp;ldquo;Fwd: &amp;rdquo; + message.getSubject());
forward.setFrom(new InternetAddress(from));
forward.addRecipient(Message.RecipientType.TO,   new InternetAddress(to));
// Create your new message part
BodyPart messageBodyPart = new MimeBodyPart();
messageBodyPart.setText(  &amp;rdquo;Here you go with the original message:\n\n&amp;rdquo;);
// Create a multi-part to combine the parts
Multipart multipart = new MimeMultipart();
multipart.addBodyPart(messageBodyPart);
// Create and fill part for the forwarded content
messageBodyPart = new MimeBodyPart();
messageBodyPart.setDataHandler(message.getDataHandler());
// Add part to multi part
multipart.addBodyPart(messageBodyPart);
// Associate multi-part with message
forward.setContent(multipart);
// Send message
Transport.send(forward);&lt;/blockquote&gt;
7．使用附件
附件作为与邮件相关的资源经常以文本、表格、图片等格式出现，如流行的邮件客户端一样，我们可以用JavaMail API从邮件中获取附件或是发送带有附件的邮件。&lt;/p&gt;

&lt;p&gt;A．发送带有附件的邮件
发送带有附件的邮件的过程有些类似转发邮件，我们需要建立一个完整邮件的各个邮件体部分，在第一个部分（即我们的邮件内容文字）后，增加一个具有DataHandler的附件而不是在转发邮件时那样复制第一个部分的DataHandler。&lt;/p&gt;

&lt;p&gt;如果我们将文件作为附件发送，那么要建立FileDataSource类型的对象作为附件数据源；如果从URL读取数据作为附件发送，那么将要建立URLDataSource类型的对象作为附件数据源。&lt;/p&gt;

&lt;p&gt;然后将这个数据源（FileDataSource或是URLDataSource）对象作为DataHandler类构造方法的参数传入，从而建立一个DataHandler对象作为数据源的DataHandler。&lt;/p&gt;

&lt;p&gt;接着将这个DataHandler设置为邮件体部分的DataHandler。这样就完成了邮件体与附件之间的关联工作，下面的工作就是BodyPart的setFileName()方法设置附件名为原文件名。&lt;/p&gt;

&lt;p&gt;最后将两个邮件体放入到Multipart中，设置邮件内容为这个容器Multipart，发送邮件。
&lt;blockquote&gt;// Define message
Message message = new MimeMessage(session);
message.setFrom(new InternetAddress(from));
message.addRecipient(Message.RecipientType.TO,   new InternetAddress(to));
message.setSubject(&amp;ldquo;Hello JavaMail Attachment&amp;rdquo;);
// Create the message part
BodyPart messageBodyPart = new MimeBodyPart();
// Fill the message
messageBodyPart.setText(&amp;ldquo;Pardon Ideas&amp;rdquo;);
Multipart multipart = new MimeMultipart();
multipart.addBodyPart(messageBodyPart);
// Part two is attachment
messageBodyPart = new MimeBodyPart();
DataSource source = new FileDataSource(filename);
messageBodyPart.setDataHandler(new DataHandler(source));
messageBodyPart.setFileName(filename);
multipart.addBodyPart(messageBodyPart);
// Put parts in message
message.setContent(multipart);
// Send the message
Transport.send(message);&lt;/blockquote&gt;
如果我们使用servlet实现发送带有附件的邮件，则必须上传附件给servlet，这时需要注意提交页面form中对编码类型的设置应为multipart/form-data。&lt;/p&gt;

&lt;p&gt;B．读取邮件中的附件
读取邮件中的附件的过程要比发送它的过程复杂一点。因为带有附件的邮件是多部分组成的，我们必须处理每一个部分获得邮件的内容和附件。
但 是如何辨别邮件信息内容和附件呢？Sun在Part类（BodyPart类实现的接口类）中提供了getDisposition()方法让开发者获得邮件 体部分的部署类型，当该部分是附件时，其返回之将是Part.ATTACHMENT。但附件也可以没有部署类型的方式存在或者部署类型为 Part.INLINE，无论部署类型为Part.ATTACHMENT还是Part.INLINE，我们都能把该邮件体部分导出保存。
&lt;blockquote&gt;Multipart mp = (Multipart)message.getContent();
for (int i=0, n=multipart.getCount(); i&amp;hellip;&lt;/blockquote&gt;
下列代码中使用了saveFile方法是自定义的方法，它根据附件的文件名建立一个文件，如果本地磁盘上存在名为附件的文件，那么将在文件名后增加数字表示区别。然后从邮件体中读取数据写入到本地文件中（代码省略）。
&lt;blockquote&gt;// from saveFile()
File file = new File(filename);
for (int i=0; file.exists(); i++)
{
file = new File(filename+i);
}&lt;/blockquote&gt;
以上是邮件体部分被正确设置的简单例子，如果邮件体部分的部署类型为null，那么我们通过获得邮件体部分的MIME类型来判断其类型作相应的处理，代码结构框架如下：
&lt;blockquote&gt;if (disposition == null) {
// Check if plain
MimeBodyPart mbp = (MimeBodyPart)part;
if (mbp.isMimeType(&amp;ldquo;text/plain&amp;rdquo;)) {
// Handle plain
} else {
// Special non-attachment cases here of
// image/gif, text/html, .
..
}
&amp;hellip;
}&lt;/blockquote&gt;
8．处理HTML邮件
前面的例子中发送的邮件都是以文本为内容的（除了附件），下面将介绍如何接收和发送基于HTML的邮件。
A．发送HTML邮件
假如我们需要发送一个HTML文件作为邮件内容，并使邮件客户端在读取邮件时获取相关的图片或者文字的话，只要设置邮件内容为html代码，并设置内容类型为text/html即可：
&lt;blockquote&gt;String htmlText = &amp;rdquo;&amp;lt;h1&amp;gt;Hello&amp;lt;/h1&amp;gt;&amp;rdquo; ;
message.setContent(htmlText, &amp;rdquo;text/html&amp;rdquo;));&lt;/blockquote&gt;
请注意：这里的图片并不是在邮件中内嵌的，而是在URL中定义的。邮件接收者只有在线时才能看到。
在接收邮件时，如果我们使用JavaMail API接收邮件的话是无法实现以HTML方式显示邮件内容的。因为JavaMail API邮件内容视为二进制流。所以要显示HTML内容的邮件，我们必须使用JEditorPane或者第三方HTML展现组件。&lt;/p&gt;

&lt;p&gt;以下代码显示了如何使用JEditorPane显示邮件内容：
&lt;blockquote&gt;if (message.getContentType().equals(&amp;ldquo;text/html&amp;rdquo;)) {
String content = (String)message.getContent();
JFrame frame = new JFrame();
JEditorPane text = new JEditorPane(&amp;ldquo;text/html&amp;rdquo;, content);
text.setEditable(false);
JScrollPane pane = new JScrollPane(text);
frame.getContentPane().add(pane);
frame.setSize(300, 300);
frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
frame.show();
}&lt;/blockquote&gt;
B．在邮件中包含图片
如 果我们在邮件中使用HTML作为内容，那么最好将HTML中使用的图片作为邮件的一部分，这样无论是否在线都会正确的显示HTML中的图片。处理方法就是 将HTML中用到的图片作为邮件附件并使用特殊的cid URL作为图片的引用，这个cid就是对图片附件的Content-ID头的引用。
处理内嵌图片就像向邮件中添加附件一样，不同之处在于我们必须通过设置图片附件所在的邮件体部分的header中Content-ID为一个随机字符串，并在HTML中img的src标记中设置为该字符串。这样就完成了图片附件与HTML的关联。
&lt;blockquote&gt;
String file = &amp;hellip;;
// Create the messageMessage message = new MimeMessage(session);// Fill its headers
message.setSubject(&amp;ldquo;Embedded Image&amp;rdquo;);
message.setFrom(new InternetAddress(from));
message.addRecipient(Message.RecipientType.TO,   new InternetAddress(to));
// Create your new message part
BodyPart messageBodyPart = new MimeBodyPart();String htmlText = &amp;rdquo;&amp;rdquo;&amp;lt;h1&amp;gt;Hello&amp;lt;/h1&amp;gt;&amp;rdquo; ;
messageBodyPart.setContent(htmlText, &amp;rdquo;text/html&amp;rdquo;);
// Create a related multi-part to combine the parts
MimeMultipart multipart = new MimeMultipart(&amp;ldquo;related&amp;rdquo;);
multipart.addBodyPart(messageBodyPart);
// Create part for the image
messageBodyPart = new MimeBodyPart();
// Fetch the image and associate to part
DataSource fds = new FileDataSource(file);
messageBodyPart.setDataHandler(new DataHandler(fds));
messageBodyPart.setHeader(&amp;ldquo;Content-ID&amp;rdquo;,&amp;ldquo;&amp;rdquo;);
// Add part to multi-part
multipart.addBodyPart(messageBodyPart);
// Associate multi-part with message
message.setContent(multipart);&lt;/blockquote&gt;
9．在邮件中搜索短语
JavaMail API提供了过滤器机制，它被用来建立搜索短语。这个短语由javax.mail.search包中的SearchTerm抽象类来定义，在定义后我们便可以使用Folder的Search()方法在Folder中查找邮件：
SearchTerm st = &amp;hellip;;Message[] msgs = folder.search(st);
下面有22个不同的类（继承了SearchTerm类）供我们使用：
AND terms (class AndTerm)
OR terms (class OrTerm)
NOT terms (class NotTerm)
SENT DATE terms (class SentDateTerm)
CONTENT terms (class BodyTerm)
HEADER terms (FromTerm / FromStringTerm, RecipientTerm / RecipientStringTerm, SubjectTerm, etc.)
使用这些类定义的断语集合，我们可以构造一个逻辑表达式，并在Folder中进行搜索。下面是一个实例：在Folder中搜索邮件主题含有“ADV”字符串或者发信人地址为friend@public.com的邮件。
&lt;blockquote&gt;SearchTerm st = new OrTerm(new SubjectTerm(&amp;ldquo;ADV:&amp;ldquo;), new FromStringTerm(&amp;ldquo;friend@public.com&amp;rdquo;));
Message[] msgs = folder.search(st);
&lt;/blockquote&gt;
&amp;nbsp;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>javax.mail.internet API 学习</title>
      <link>http://www.daniex.tk/blog/2012/javax-mail-internet-api/</link>
      <pubDate>Fri, 20 Jan 2012 14:34:58 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2012/javax-mail-internet-api/</guid>
      <description>&lt;p&gt;前些天编程，用了个这样的数据传输方式，在http POST消息中传MIME数据包。于是找到javax.mail.internet的包用。在Java EE 1.5的库里包含这个包。现在有的MIME包不仅仅这一个，还有很多，更有千秋。比如这个包的Countent-Type 的 boundary字段是自动生成的，还不太方便取出来。有些包是能够自己设置boundary字段。&lt;/p&gt;

&lt;p&gt;下面转载了这个包的基本使用方法，供学习参考。&lt;span style=&#34;color: #3366ff;&#34;&gt;&lt;a title=&#34;MIME详细介绍&#34; href=&#34;http://daniex.info/mime-details.html&#34; target=&#34;_blank&#34;&gt;&lt;span style=&#34;color: #3366ff;&#34;&gt;MIME学习请参考这里&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;++++++++++++++++++++++++++++++++++++++++++++&lt;/p&gt;

&lt;p&gt;打开JavaMail.jar文件，我们将发现在javax.mail的包下面存在着一些核心类：Session、Message、Address、Authenticator、Transport、Store、Folder。而且在 javax.mail.internet包中还有一些常用的子类。&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;A．Session&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Session类定义了基本的邮件会话。就像Http会话那样，我们进行收发邮件的工作都是基于这个会话的。Session对象利用了java.util.Properties对象获得了邮件服务器、用户名、密码信息和整个应用程序都要使用到的共享信息。&lt;/p&gt;

&lt;p&gt;Session类的构造方法是私有的，所以我们可以使用Session类提供的getDefaultInstance()这个静态工厂方法获得一个默认的Session对象：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Properties props = new Properties();// fill props with any information
2  Session session = Session.getDefaultInstance(props, null);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
或者使用getInstance()这个静态工厂方法获得自定义的Session:
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Properties props = new Properties();// fill props with any information
2  Session session = Session.getInstance(props, null);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
从上面的两个例子中不难发现，getDefaultInstance()和getInstance()方法的第二个参数都是null，这是因为在上面的例子中并没有使用到邮件授权，下文中将对授权进行详细介绍。
从很多的实例看，在对mail server进行访问的过程中使用共享的Session是足够的，即使是工作在多个用户邮箱的模式下也不例外。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;B．&lt;/strong&gt;&lt;strong&gt;Message&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;当我们建立了Session对象后，便可以构造被 发送的信息体了。在这里SUN提供了Message类型来帮助开发者完成这项工作。由于Message是一个抽象类，大多数情况下，我们使用 javax.mail.internet.MimeMessage这个子类，该类是使用MIME类型、MIME信息头的邮箱信息。信息头只能使用US- ASCII字符，而非ASCII字符将通过编码转换为ASCII的方式使用。&lt;/p&gt;

&lt;p&gt;为了建立一个MimeMessage对象，我们必须将Session对象作为MimeMessage构造方法的参数传入：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 MimeMessage message = new MimeMessage(session);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
注意：对于MimeMessage类来讲存在着多种构造方法，比如使用输入流作为参数的构造方法。&lt;/p&gt;

&lt;p&gt;在建立了MimeMessage对象后，我们需要设置它的各个part，对于MimeMessage类来说，这些part就是MimePart接口。最基本的设置信息内容的方法就是通过表示信息内容和米么类型的参数调用setContent()方法：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 message.setContent(&amp;ldquo;Hello&amp;rdquo;, &amp;ldquo;text/plain&amp;rdquo;);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
然而，如果我们所使用的MimeMessage中信息内容是文本的话，我们便可以直接使用setText()方法来方便的设置文本内容：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 message.setText(&amp;ldquo;Hello&amp;rdquo;);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
前面所讲的两种方法，对于文本信息，后者更为合适。而对于其它的一些信息类型，比如HTML信息，则要使用前者。
别忘记了，使用setSubject()方法对邮件设置邮件主题：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 message.setSubject(&amp;ldquo;First&amp;rdquo;);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;strong&gt;C．Address&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;到这里，我们已经建立了Session和Message，下面将介绍如何使用邮件地址类：Address。像Message一样，Address类也是一个抽象类，所以我们将使用javax.mail.internet.InternetAddress这个子类。&lt;/p&gt;

&lt;p&gt;通过传入代表邮件地址的字符串，我们可以建立一个邮件地址类：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Address address = new InternetAddress(&amp;ldquo;president@whitehouse.gov&amp;rdquo;);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
如果要在邮件地址后面增加名字的话，可以通过传递两个参数：代表邮件地址和名字的字符串来建立一个具有邮件地址和名字的邮件地址类：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Address address = new InternetAddress(&amp;ldquo;president@whitehouse.gov&amp;rdquo;, &amp;ldquo;George Bush&amp;rdquo;);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
本文在这里所讲的邮件地址类是为了设置邮件信息的发信人和收信人而准备的，在建立了邮件地址类后，我们通过message的setFrom()和setReplyTo()两种方法设置邮件的发信人：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 message.setFrom(address);message.setReplyTo(address);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
若在邮件中存在多个发信人地址，我们可用addForm()方法增加发信人：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Address address[] = &amp;hellip;;
2 message.addFrom(address);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
为了设置收信人，我们使用addRecipient()方法增加收信人，此方法需要使用Message.RecipientType的常量来区分收信人的类型：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 message.addRecipient(type, address)&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
下面是Message.RecipientType的三个常量：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Message.RecipientType.TO
2 Message.RecipientType.CC
3 Message.RecipientType.BCC&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
因此，如果我们要发送邮件给总统，并发用一个副本给第一夫人的话，下面的方法将被用到：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Address toAddress = new InternetAddress(&amp;ldquo;vice.president@whitehouse.gov&amp;rdquo;);
2 Address ccAddress = new InternetAddress(&amp;ldquo;first.lady@whitehouse.gov&amp;rdquo;);
3 message.addRecipient(Message.RecipientType.TO, toAddress);
4 message.addRecipient(Message.RecipientType.CC, ccAddress);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
JavaMail API并没有提供检查邮件地址有效性的机制。当然我们可以自己完成这个功能：验证邮件地址的字符是否按照RFC822规定的格式书写或者通过DNS服务器上的MX记录验证等。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;D．Authenticator&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;像java.net类那样，JavaMail API通过使用授权者类 （Authenticator）以用户名、密码的方式访问那些受到保护的资源，在这里“资源”就是指邮件服务器。在javax.mail包中可以找到这个 JavaMail的授权者类（Authenticator）。&lt;/p&gt;

&lt;p&gt;在使用Authenticator这个抽象类时，我们必须采用继承该抽象类的方式，并且该继 承类必须具有返回PasswordAuthentication对象（用于存储认证时要用到的用户名、密 码）getPasswordAuthentication()方法。并且要在Session中进行注册，使Session能够了解在认证时该使用哪个类。&lt;/p&gt;

&lt;p&gt;下面代码片断中的MyAuthenticator就是一个Authenticator的子类：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Properties props = new Properties();// fill props with any information
2  Authenticator auth = new MyAuthenticator();
3 Session session = Session.getDefaultInstance(props, auth);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;strong&gt;E．Transport&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;在发送信息时，Transport类将被用到。这个类实现了发送信息的协议（通称为SMTP），此类是一个抽象类，我们可以使用这个类的静态方法send()来发送消息：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Transport.send(message);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
当然，方法是多样的。我们也可由Session获得相应协议对应的Transport实例。并通过传递用户名、密码、邮件服务器主机名等参数建立与邮件服务器的连接，并使用sendMessage()方法将信息发送，最后关闭连接：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 message.saveChanges(); // implicit with send()
2  Transport transport = session.getTransport(&amp;ldquo;smtp&amp;rdquo;);
3 transport.connect(host, username, password);
4 transport.sendMessage(message, message.getAllRecipients());
5 transport.close();&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
评论：上面的方法是一个很好的方法，尤其是在我们在同一个邮件服务器上发送多个邮件时。因为 这时我们将在连接邮件服务器后连续发送邮件，然后再关闭掉连接。send()这个基本的方法是在每次调用时进行与邮件服务器的连接的，对于在同一个邮件服 务器上发送多个邮件来讲可谓低效的方式。&lt;/p&gt;

&lt;p&gt;注意：如果需要在发送邮件过程中监控mail命令的话，可以在发送前设置debug标志：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 session.setDebug(true)；&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;strong&gt;F．Store和Folder&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;接 收邮件和发送邮件很类似都要用到Session。但是在获得Session后，我们需要从Session中获取特定类型的Store，然后连接到 Store，这里的Store代表了存储邮件的邮件服务器。在连接Store的过程中，极有可能需要用到用户名、密码或者Authenticator。
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Store store = session.getStore(&amp;ldquo;pop3&amp;rdquo;);
2 store.connect(host, username, password);&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
在连接到Store后，一个Folder对象即目录对象将通过Store的getFolder()方法被返回，我们可从这个Folder中读取邮件信息：
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 Folder folder = store.getFolder(&amp;ldquo;INBOX&amp;rdquo;);
2 folder.open(Folder.READ_ONLY);
3 Message message[] = folder.getMessages();&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
上面的例子首先从Store中获得INBOX这个Folder（对于POP3协议只有一个名为INBOX的Folder有效），然后以只读（Folder.READ_ONLY）的方式打开Folder，最后调用Folder的 getMessages()方法得到目录中所有Message的数组。&lt;/p&gt;

&lt;p&gt;注意：对于POP3协议只 有一个名为INBOX的Folder有效，而对于IMAP协议，我们可以访问多个Folder（想想前面讲的IMAP协议）。而且SUN在设计 Folder的getMessages()方法时采取了很智能的方式：首先接收新邮件列表，然后再需要的时候（比如读取邮件内容）才从邮件服务器读取邮件 内容。&lt;/p&gt;

&lt;p&gt;在读取邮件时，我们可以用Message类的getContent()方法接收邮件或是writeTo()方法将邮件保存，getContent()方法只接收邮件内容（不包含邮件头），而writeTo()方法将包括邮件头。
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 System.out.println(((MimeMessage)message).getContent());&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
在读取邮件内容后，别忘记了关闭Folder和Store。
&lt;div&gt;
&lt;blockquote&gt;
&lt;div&gt;1 folder.close(aBoolean);
2 store.close();&lt;/div&gt;&lt;/blockquote&gt;
&lt;/div&gt;
传递给Folder.close()方法的boolean类型参数表示是否在删除操作邮件后更新Folder。&lt;/p&gt;

&lt;p&gt;转自：&lt;a href=&#34;http://tech.ccidnet.com/art/3741/20060531/567247_1.html&#34;&gt;http://tech.ccidnet.com/art/3741/20060531/567247_1.html&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>MIME详细介绍</title>
      <link>http://www.daniex.tk/blog/2012/mime-details/</link>
      <pubDate>Thu, 19 Jan 2012 01:11:28 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2012/mime-details/</guid>
      <description>&lt;div id=&#34;cnblogs_post_body&#34;&gt;
（注：本文转自CSDN，因本人学习，只是做一笔记，以防遗忘。）

&lt;strong&gt;Q&lt;/strong&gt; 什么是MIME？什么是MIME邮件？

&lt;strong&gt;A&lt;/strong&gt; MIME, 全称为“Multipurpose Internet Mail Extensions”, 比较确切的中文名称为“多用途互联网邮件扩展”。它是当前广泛应用的一种电子邮件技术规范，基本内容定义于RFC 2045-2049。

自然，MIME邮件就是符合MIME规范的电子邮件，或者说根据MIME规范编码而成的电子邮件。

在MIME出台之前，使用RFC 822只能发送基本的ASCII码文本信息，邮件内容如果要包括二进制文件、声音和动画等，实现起来非常困难。MIME提供了一种可以在邮件中附加多种不 同编码文件的方法，弥补了原来的信息格式的不足。实际上不仅仅是邮件编码，现在MIME经成为HTTP协议标准的一个部分。

下面举几个MIME邮件的例子，让我们先对MIME编码的格式有个直观的印象。例1是最简单的，只带纯文本正 文，基本上就是RFC 822格式；例2复杂一些，包含纯文本和超文本正文；例3是最复杂的，包含纯文本正文、超文本正文、内嵌资源和文件附件。其中，行号和行号后的空格是为了 分析方便而另外加的，“... ... ... ...”表示此处省略了大段编码。

例1
&lt;blockquote&gt;1 Date: Thu, 18 Apr 2002 09:32:45 +0800
2 From: &amp;lt;bhw98@sina.com&amp;gt;
3 To: &amp;lt;bhwang@jlonline.com&amp;gt;
4 Subject: Test
5 Mime-Version: 1.0
6 Content-Type: text/plain; charset=&#34;iso-8859-1&#34;
7
8 This is a simple mail.
9&lt;/blockquote&gt;
例2
&lt;blockquote&gt;1 From: &#34;bhw98&#34; &amp;lt;bhw98@sina.com&amp;gt;
2 Reply-To: bhw98@sina.com
3 To: &amp;lt;bluesky7810@163.com&amp;gt;
4 Subject: Re: help
5 X-Mailer: Foxmail 4.2 [cn]
6 Mime-Version: 1.0
7 Content-Type: multipart/alternative;
8 boundary=&#34;=====002_Dragon307572345230_=====&#34;
9
10
11 This is a multi-part message in MIME format.
12
13 --=====002_Dragon307572345230_=====
14 Content-Type: text/plain; charset=&#34;GB2312&#34;
15 Content-Transfer-Encoding: quoted-printable
16
17 bluesky7810=A3=AC=C4=FA=BA=C3=A3=A1
18
19 =A1=A1=A1=A1=D4=DA=CF=C2=C6=AA=D7=EE=BA=F3=BF=C9=D2=D4=CF=C2=D4=D8=B0=A1=A3=AC=C4=E3
... ... ... ...
30 =A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A1=A12003-04-07
31
32 --=====002_Dragon307572345230_=====
33 Content-Type: text/html; charset=&#34;GB2312&#34;
34 Content-Transfer-Encoding: quoted-printable
35
36 &amp;lt;!DOCTYPE HTML PUBLIC &#34;-//W3C//DTD HTML 4.0 Transitional//EN&#34;&amp;gt;
37 &amp;lt;HTML&amp;gt;&amp;lt;HEAD&amp;gt;
38 &amp;lt;META content=3D&#34;text/html; charset=3Dgb2312&#34;=
39 http-equiv=3DContent-Type&amp;gt;
40 &amp;lt;META content=3D&#34;MSHTML 5.00.2920.0&#34; name=3DGENERATOR&amp;gt;
... ... ... ...
79 &amp;lt;/HTML&amp;gt;
80
81 --=====002_Dragon307572345230_=====--
82&lt;/blockquote&gt;
例3
&lt;blockquote&gt;1 Return-Path: &amp;lt;bluesky7810@163.com&amp;gt;
2 Delivered-To: bhw98@sina.com
3 Received: (qmail 75513 invoked by alias); 20 May 2002 02:19:53 -0000
4 Received: from unknown (HELO bluesky) (61.155.118.135)
5 by 202.106.187.143 with SMTP; 20 May 2002 02:19:53 -0000
6 Message-ID: &amp;lt;007f01c3111c$742fec00$0100007f@bluesky&amp;gt;
7 From: &#34;=?gb2312?B?wLbAtrXEzOwNCg==?=&#34; &amp;lt;bluesky7810@163.com&amp;gt;
8 To: &#34;bhw98&#34; &amp;lt;bhw98@sina.com&amp;gt;
9 Cc: &amp;lt;bhwang@jlonline.com&amp;gt;
10 Subject: =?gb2312?B?ztK1xLbgtK6/2rPM0PI=?=
11 Date: Sat, 20 May 2002 10:03:36 +0800
12 MIME-Version: 1.0
13 Content-Type: multipart/mixed;
14 boundary=&#34;----=_NextPart_000_007A_01C3115F.80DFC5E0&#34;
15 X-Priority: 3
16 X-MSMail-Priority: Normal
17 X-Mailer: Microsoft Outlook Express 5.00.2919.6700
18 X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6700
19
20 This is a multi-part message in MIME format.
21
22 ------=_NextPart_000_007A_01C3115F.80DFC5E0
23 Content-Type: multipart/related; type=&#34;multipart/alternative&#34;;
24 boundary=&#34;----=_NextPart_001_007B_01C3115F.80DFC5E0&#34;
25
26
27 ------=_NextPart_001_007B_01C3115F.80DFC5E0
28 Content-Type: multipart/alternative;
29 boundary=&#34;----=_NextPart_002_007C_01C3115F.80DFC5E0&#34;
30
31 ------=_NextPart_002_007C_01C3115F.80DFC5E0
32 Content-Type: text/plain; charset=&#34;gb2312&#34;
33 Content-Transfer-Encoding: quoted-printable
34
35 bhw98, =C4=E3=BA=C3!
36 =D5=E2=CA=C7=CE=D2=D0=B4=B5=C4=B6=E0=B4=AE=BF=DA=CD=A8=D0=C5=B5=C4=B3=CC=D0=
37 =F2, =C7=EB=D6=B8=BD=CC!
38
39
40 ------=_NextPart_002_007C_01C3115F.80DFC5E0
41 Content-Type: text/html; charset=&#34;gb2312&#34;
42 Content-Transfer-Encoding: quoted-printable
43
44 &amp;lt;!DOCTYPE HTML PUBLIC &#34;-//W3C//DTD HTML 4.0 Transitional//EN&#34;&amp;gt;
45 &amp;lt;HTML&amp;gt;&amp;lt;HEAD&amp;gt;&amp;lt;TITLE&amp;gt;=C7=E7=C0=CA&amp;lt;/TITLE&amp;gt;
46 &amp;lt;META content=3D&#34;text/html; charset=3Dgb2312&#34; http-equiv=3DContent-Type&amp;gt;
47 &amp;lt;STYLE&amp;gt;BODY {
48 COLOR: #0033cc; FONT-FAMILY: =CB=CE=CC=E5, Arial, Helvetica; FONT-SIZE: =
49 9pt; MARGIN-LEFT: 10px; MARGIN-TOP: 25px
50 }
51 &amp;lt;/STYLE&amp;gt;
52 &amp;lt;META content=3D&#34;MSHTML 5.00.2920.0&#34; name=3DGENERATOR&amp;gt;&amp;lt;/HEAD&amp;gt;
53 &amp;lt;BODY background=3Dcid:007901c3111c$72b978a0$0100007f@bluesky =
54 bgColor=3D#ffffff&amp;gt;
55 &amp;lt;DIV&amp;gt;
56 &amp;lt;DIV&amp;gt;bhw98, =C4=E3=BA=C3!&amp;lt;/DIV&amp;gt;
57 &amp;lt;P&amp;gt;=D5=E2=CA=C7=CE=D2=D0=B4=B5=C4=B6=E0=B4=AE=BF=DA=CD=A8=D0=C5=B5=C4=B3=CC=
58 =D0=F2, =C7=EB=D6=B8=BD=CC!&amp;lt;/P&amp;gt;&amp;lt;/DIV&amp;gt;
59 &amp;lt;P&amp;gt; &amp;lt;/P&amp;gt;&amp;lt;/BODY&amp;gt;&amp;lt;/HTML&amp;gt;
60
61 ------=_NextPart_002_007C_01C3115F.80DFC5E0--
62
63 ------=_NextPart_001_007B_01C3115F.80DFC5E0
64 Content-Type: image/jpeg; name=&#34;=?gb2312?B?x+fAyrGzvrAuSlBH?=&#34;
65 Content-Transfer-Encoding: base64 66 Content-ID: &amp;lt;007901c3111c$72b978a0$0100007f@bluesky&amp;gt;
67
68 /9j/4AAQSkZJRgABAgEASABIAAD/7QVoUGhvdG9zaG9wIDMuMAA4QklNA+0AAAAAABAASAAAAAEA
69 AQBIAAAAAQABOEJJTQPzAAAAAAAIAAAAAAAAAAA4QklNBAoAAAAAAAEAADhCSU0nEAAAAAAACgAB
70 AAAAAAAAAAI4QklNA/UAAAAAAEgAL2ZmAAEAbGZmAAYAAAAAAAEAL2ZmAAEAoZmaAAYAAAAAAAEA
... ... ... ...
169 RxVw98Vawq12xQ44q0cKtHFDWKGsKt4EtiuKt4q//9k=
170
171 ------=_NextPart_001_007B_01C3115F.80DFC5E0--
172
173 ------=_NextPart_000_007A_01C3115F.80DFC5E0
174 Content-Type: application/msword; name=&#34;readme.doc&#34;
175 Content-Transfer-Encoding: base64
176 Content-Disposition: attachment; filename=&#34;readme.doc&#34;
177
178 0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAABAAAAJgAAAAAAAAAA
179 EAAAKAAAAAEAAAD+////AAAAACUAAAD/////////////////////////////////////////////
180 ////////////////////////////////////////////////////////////////////////////
... ... ... ...
1688 AAAAAAAAAAAAAAAAAAA=
1689
1690 ------=_NextPart_000_007A_01C3115F.80DFC5E0
1691 Content-Type: application/x-zip-compressed;
1692 name=&#34;=?gb2312?B?tuC0rr/azajQxbXE1LTC6y56aXA=?=&#34;
1693 Content-Transfer-Encoding: base64
1694 Content-Disposition: attachment;
1695 filename=&#34;=?gb2312?B?tuC0rr/azajQxbXE1LTC6y56aXA=?=&#34;
1696
1697 UEsDBBQAAAAIAFKAoi7qOMOvLw0AAABWAAAUAAAAtuC0rr/azajQxbXE1LTC6y5kb2PtXHtwVNUZ
1698 /+4+kk3IQoAkBkRYQkSgbrKb7IYNEMwmm6ckG0jCI0boZneTbJJ9sNlAEsdOtFqd8Z846tQ6PhB1
1699 hrZTJoK0Vhgf1aGt4rMy6D8tdugfTjuOpcBIR9j+vvsIy4YkRNTRen87v/ud53cee+6557vn7L73
... ... ... ...
3125 zajQxbXE1LTC6y5kb2NQSwUGAAAAAAEAAQBCAAAAYQ0AAA==
3126
3127 ------=_NextPart_000_007A_01C3115F.80DFC5E0--
3128&lt;/blockquote&gt;
&lt;strong&gt;Q&lt;/strong&gt; 在开始研究MIME邮件的时候，如何得到这样的源码？

&lt;strong&gt;A&lt;/strong&gt; 一些功能比较完善的邮件客户端软件，如微软的Outlook Express，国产的Foxmail等，都提供了查看和保存邮件源码(原始信息)的功能。在Foxmail中，选择邮件列表右键菜单的“原始信息”进行 查看，主菜单的“文件-导出”进行保存。在Outlook Express中，对应的操作分别是“属性”和“另存为”。所保存的.eml文件，可以调用这些程序打开。

&lt;strong&gt;Q&lt;/strong&gt; 请介绍一下MIME邮件的组成？

&lt;strong&gt;A&lt;/strong&gt; 总体来说，MIME消息由消息头和消息体两大部分组成。现在我们关注的是MIME邮件，因此在以下的讨论中姑且称“消息”为“邮件”。在上面的例子中，例 1的1-6行，例2的1—8行，例3的1-18行，是邮件头；例1的8—9行，例2的10—82行，例3的20—3128行，是邮件体。邮件头与邮件体之 间以空行进行分隔，如例1的第7行，例2的第9行，例3的第19行。邮件头中不允许出现空行。有一些邮件不能被邮件客户端软件识别，显示的是原始码，就是 因为首行是空行。

邮件头包含了发件人、收件人、主题、时间、MIME版本、邮件内容的类型等重要信息。每条信息称为一个域，由 域名后加“: ”和信息内容构成，可以是一行，较长的也可以占用多行。域的首行必须“顶头”写，即左边不能有空白字符（空格和制表符）；续行则必须以空白字符打头，且第 一个空白字符不是信息本身固有的，解码时要过滤掉。如例2的7-8行，例3的4-5行，13-14行，分别属于一个域。

邮件体包含邮件的内容，它的类型由邮件头的“Content-Type”域指出。常见的简单类型有text/plain(纯文本)和text/html(超文本)。

例2和例3中出现的multipart类型，是MIME邮件的精髓。邮件体被分为多个段，每个段又包含段头和 段体两部分，这两部分之间也以空行分隔。常见的multipart类型有三种：multipart/mixed, multipart/related和multipart/alternative。从它们的名称，不难推知这些类型各自的含义和用处。它们之间的层次关 系可归纳为下图所示：
&lt;pre&gt;+------------------------- multipart/mixed ----------------------------+
|                                                                      |
|  +----------------- multipart/related ------------------+            |
|  |                                                      |            |
|  |  +----- multipart/alternative ------+  +----------+  |  +------+  |
|  |  |                                  |  | 内嵌资源 |  |  | 附件 |  |
|  |  |  +------------+  +------------+  |  +----------+  |  +------+  |
|  |  |  | 纯文本正文 |  | 超文本正文 |  |                |            |
|  |  |  +------------+  +------------+  |  +----------+  |  +------+  |
|  |  |                                  |  | 内嵌资源 |  |  | 附件 |  |
|  |  +----------------------------------+  +----------+  |  +------+  |
|  |                                                      |            |
|  +------------------------------------------------------+            |
|                                                                      |
+----------------------------------------------------------------------+&lt;/pre&gt;
可以看出，如果在邮件中要添加附件，必须定义multipart/mixed段；如果存在内嵌资源，至少要定义 multipart/related段；如果纯文本与超文本共存，至少要定义multipart/alternative段。什么是“至少”？举个例子 说，如果只有纯文本与超文本正文，那么在邮件头中将类型扩大化，定义为multipart/related，甚至multipart/mixed，都是允 许的。

multipart诸类型的共同特征是，在段头指定“boundary”参数字符串，段体内的每个子段以此串 定界。所有的子段都以“--”+boundary行开始，父段则以“--”+boundary+“--”行结束。段与段之间也以空行分隔。在邮件体是 multipart类型的情况下，邮件体的开始部分(第一个“--”+boundary行之前)可以有一些附加的文本行，相当于注释，解码时应忽略。段间 也可以有一些附加的文本行，不会显示出来，如果有兴趣，不妨验证一下。

结合boundary定界和multipart层次关系图，我们分析一下例2和例3的邮件体层次与段嵌套关系。

在例2中，10-12行是附加文本行，13-82行是multipart/alternative型的段，包含两个子段：13-30行是纯文本正文，32-79行是超文本正文。

在例3中，20-21行是附加文本行，22-3127行是multipart/mixed型的段，包含3个子 段：22-171行是multipart/related段，173-1688行与1690-3125行是两个附件。multipart/related 段又包含两个子段：27-61行是multipart/alternative段，63-169行是一个内嵌资源(图片)。multipart /alternative段又包含两个子段：31-48行是纯文本正文，40-59行是超文本正文。

例1只有纯文本正文，实际上属于multipart层次关系图中的一个特殊情况。如果非要避简就繁，写成下面的形式，也是完全符合MIME精神的。
&lt;blockquote&gt;Date: Thu, 18 Apr 2002 09:32:45 +0800
From: &amp;lt;bhw98@sina.com&amp;gt;
To: &amp;lt;bhwang@jlonline.com&amp;gt;
Subject: Test
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary=&#34;{[(^_^)]}&#34; --{[(^_^)]}
Content-Type: text/plain; charset=&#34;iso-8859-1&#34;
Content-Transfer-Encoding: 7bit This is a simple mail. --{[(^_^)]}--&lt;/blockquote&gt;
&lt;strong&gt;Q&lt;/strong&gt; 在邮件头和段头中，有哪一些常见的域？

&lt;strong&gt;A&lt;/strong&gt; 在邮件头中，有很多从RFC 822沿用的域名，MIME也增加了一些。常见的标准域名和含义如下
&lt;table align=&#34;center&#34;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;域名&lt;/td&gt;
&lt;td&gt;含义&lt;/td&gt;
&lt;td&gt;添加者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Received&lt;/td&gt;
&lt;td&gt;传输路径&lt;/td&gt;
&lt;td&gt;各级邮件服务器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Return-Path&lt;/td&gt;
&lt;td&gt;回复地址&lt;/td&gt;
&lt;td&gt;目标邮件服务器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Delivered-To&lt;/td&gt;
&lt;td&gt;发送地址&lt;/td&gt;
&lt;td&gt;目标邮件服务器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Reply-To&lt;/td&gt;
&lt;td&gt;回复地址&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;From&lt;/td&gt;
&lt;td&gt;发件人地址&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;To&lt;/td&gt;
&lt;td&gt;收件人地址&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Cc&lt;/td&gt;
&lt;td&gt;抄送地址&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Bcc&lt;/td&gt;
&lt;td&gt;暗送地址&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Date&lt;/td&gt;
&lt;td&gt;日期和时间&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Subject&lt;/td&gt;
&lt;td&gt;主题&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Message-ID&lt;/td&gt;
&lt;td&gt;消息ID&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MIME-Version&lt;/td&gt;
&lt;td&gt;MIME版本&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-Type&lt;/td&gt;
&lt;td&gt;内容的类型&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-Transfer-Encoding&lt;/td&gt;
&lt;td&gt;内容的传输编码方式&lt;/td&gt;
&lt;td&gt;邮件的创建者&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
非标准的、自定义域名都以X-开头，例如X-Mailer, X-MSMail-Priority等，通常在接收和发送邮件的是同一程序时才能理解它们的意义。

在段头中，大致有如下一些域
&lt;table align=&#34;center&#34;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;域名&lt;/td&gt;
&lt;td&gt;含义&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-Type&lt;/td&gt;
&lt;td&gt;段体的类型&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-Transfer-Encoding&lt;/td&gt;
&lt;td&gt;段体的传输编码方式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-Disposition&lt;/td&gt;
&lt;td&gt;段体的安排方式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-ID&lt;/td&gt;
&lt;td&gt;段体的ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-Location&lt;/td&gt;
&lt;td&gt;段体的位置(路径)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content-Base&lt;/td&gt;
&lt;td&gt;段体的基位置&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
有 的域除了值之外，还带有参数。值与参数、参数与参数之间以“;”分隔。参数名与参数值之间以“=”分隔。如例3的28-29行，Content-Type 域的值为“multipart/alternative”，此外有一个参数boundary，值 为&#34;----=_NextPart_002_007C_01C3115F.80DFC5E0&#34;。又如例3的第176行，Content- Disposition域的值为“attachment”，此外有一个参数filename，值为“readme.doc”。

&lt;strong&gt;Q&lt;/strong&gt; Content-Type以及它们的参数有哪些形式？

&lt;strong&gt;A&lt;/strong&gt; Content-Type都是“主类型/子类型”的形式。主类型有text, image, audio, video, application, multipart, message等，分别表示文本、图片、音频、视频、应用、分段、消息等。每个主类型都可能有多个子类型，如text类型就包含plain, html, xml, css等子类型。以X-开头的主类型和子类型，同样表示自定义的类型，未向IANA正式注册，但大多已经约定成俗了。如application/x- zip-compressed是ZIP文件类型。在Windows中，注册表的“HKEY_CLASSES_ROOT\MIME\Database \Content Type”内列举了除multipart之外大部分已知的Content-Type。

关于参数的形式，RFC里有很多补充规定，有的允许带几个参数，较为常见的有
&lt;table align=&#34;center&#34;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;主类型&lt;/td&gt;
&lt;td&gt;参数名&lt;/td&gt;
&lt;td&gt;含义&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;text&lt;/td&gt;
&lt;td&gt;charset&lt;/td&gt;
&lt;td&gt;字符集&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;image&lt;/td&gt;
&lt;td&gt;name&lt;/td&gt;
&lt;td&gt;名称&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;application&lt;/td&gt;
&lt;td&gt;name&lt;/td&gt;
&lt;td&gt;名称&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;multipart&lt;/td&gt;
&lt;td&gt;boundary&lt;/td&gt;
&lt;td&gt;边界&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
其中字符集也能在Windows注册表的“HKEY_CLASSES_ROOT\MIME\Database\Charset”内见到。

&lt;strong&gt;Q&lt;/strong&gt; Content-Transfer-Encoding有哪些？有什么特点？

&lt;strong&gt;A&lt;/strong&gt; Content-Transfer-Encoding共有Base64, Quoted-printable, 7bit, 8bit, Binary等几种。其中7bit是缺省的编码方式。电子邮件源码最初设计为全部是可打印的ASCII码的形式。非ASCII码的文本或数据要编码成要求 的格式，如上面的三个例子。Base64, Quoted-Printable是在非英语国家使用最广使的编码方式。Binary方式只具有象征意义，而没有任何实用价值。

Base64将输入的字符串或一段数据编码成只含有 {&#39;A&#39;-&#39;Z&#39;, &#39;a&#39;-&#39;z&#39;, &#39;0&#39;-&#39;9&#39;, &#39;+&#39;, &#39;/&#39;}这64个字符的串，&#39;=&#39;用于填充。其编码的方法是，将输入数据流每次取6 bit，用此6 bit的值(0-63)作为索引去查表，输出相应字符。这样，每3个字节将编码为4个字符(3×8 → 4×6)；不满4个字符的以&#39;=&#39;填充。有的场合，以“=?charset?B?xxxxxxxx?=”表示xxxxxxxx是Base64编码，且原文 的字符集是charset。如例3第7行&#34;=?gb2312?B?wLbAtrXEzOwNCg==?=&#34;是由简体中文“蓝蓝的天”编码而成的。在段体内 则直接编码，适当时机换行，MIME建议每行最多76个字符。如例3的1697-3125行，是一个ZIP文件的Base64编码。

Quoted-printable根据输入的字符串或字节 范围进行编码，若是不需编码的字符，直接输出；若需要编码，则先输出&#39;=&#39;，后面跟着以2个字符表示的十六进制字节值。有的场合，以 “=?charset?Q?xxxxxxxx?=”表示xxxxxxxx是Quoted-printable编码，且原文的字符集是charset。在段 体内则直接编码，适当时机换行，换行前额外输出一个&#39;=&#39;。如例3的44-59行，是HTML文本的Quoted-printable编码。其中第45行 “=C7=E7=C0=CA”原文是“晴朗”，因为“晴”的GB2312码是C7E7，“朗”的GB2312码是C0CA。第48、53、57行末尾只有 孤零零的&#39;=&#39;，表示这是由编码造成的软回车，而非原文固有的。

近年来，国内多数邮件服务器已经支持8bit方式，因此只在国内传输的邮件，特别是在邮件头中，可直接使用8bit编码，对汉字不做处理。如果邮件要出国，还是老老实实地按Base64或Quoted-printable编码才行。

&lt;strong&gt;Q&lt;/strong&gt; 什么是内嵌资源？它有哪些形式？

&lt;strong&gt;A&lt;/strong&gt; 内嵌资源也是MIME的一个发光点，它能使邮件内容变得生动活泼、丰富多彩。可在邮件的multipart/related框架内定义一些与正文关联的图 片、动画、声音甚至CSS样式和脚本的段。通常在HTML正文内，使用超级链接与内嵌资源相联系。如在例3中，HTML正文53-54行，解码后为
&lt;blockquote&gt;&amp;lt;BODY background=cid:007901c3111c$72b978a0$0100007f@bluesky bgColor=#ffffff&amp;gt;&lt;/blockquote&gt;
它指出用一个Content-ID为007901c3111c$72b978a0$0100007f@bluesky的图片作为背景(cid:xxxxxxxx也是一种超级链接)。而64-169行恰好就是这样一个内嵌资源。

除了用Content-ID进行联系外，还有另外一种常用形式：用普通超级连接和Content-Location。例如：

在HTML正文中，
&lt;blockquote&gt;... ... ... ... &amp;lt;
IMG SRC=&#34;http://www.dangdang.com/images/all/anti_joyo_dm_book.gif&#34;&amp;gt;
... ... ... ... &amp;lt;
IMG SRC=&#34;http://www.dangdang.com/dd2001/getimage_small.asp?id=486341&#34;&amp;gt;
... ... ... ...&lt;/blockquote&gt;
对应的内嵌资源为
&lt;blockquote&gt;Content-Type: image/gif; name=&#34;anti_joyo_dm_book.gif&#34;
Content-Transfer-Encoding: base64
Content-Location: http://www.dangdang.com/images/all/anti_joyo_dm_book.gif
... ... ... ...
Content-Type: application/octet-stream; name=&#34;getimage_small.asp?id=486341&#34;
Content-Transfer-Encoding: base64
Content-Location: http://www.dangdang.com/dd2001/getimage_small.asp?id=486341
... ... ... ...&lt;/blockquote&gt;
另外，
&lt;blockquote&gt;Content-Location: http://www.dangdang.com/images/all/anti_joyo_dm_book.gif&lt;/blockquote&gt;
与
&lt;blockquote&gt;Content-Location: anti_joyo_dm_book.gif Content-Base: http://www.dangdang.com/images/all/&lt;/blockquote&gt;
是等效的。

&lt;strong&gt;Q&lt;/strong&gt; 邮件病毒如何利用附件和内嵌资源传播？

&lt;strong&gt;A&lt;/strong&gt; 有的邮件附件可能带有病毒，容易理解。附件毕竟是文件，也好预防，不轻易打开就是了。但内嵌资源是在浏览邮件内容时就要访问的，若其中藏有病毒或恶意代码，你在不知不觉中就中招了。如前两年曾经在全球范围内流行的Nimda病毒，功能性源码如下：
&lt;blockquote&gt;MIME-Version: 1.0
Content-Type: multipart/related; type=&#34;multipart/alternative&#34;; boundary=&#34;====_ABC1234567890DEF_====&#34;

--====_ABC1234567890DEF_====
Content-Type: multipart/alternative; boundary=&#34;====_ABC0987654321DEF_====&#34;

--====_ABC0987654321DEF_====
Content-Type: text/html; charset=&#34;iso-8859-1&#34;
Content-Transfer-Encoding: 7bit &amp;lt;HTML&amp;gt;&amp;lt;HEAD&amp;gt;&amp;lt;/HEAD&amp;gt;&amp;lt;BODY bgColor=#ffffff&amp;gt; &amp;lt;iframe src=cid:EA4DMGBP9p height=0 width=0&amp;gt; &amp;lt;/iframe&amp;gt;&amp;lt;/BODY&amp;gt;&amp;lt;/HTML&amp;gt;

--====_ABC0987654321DEF_====--

--====_ABC1234567890DEF_====
Content-Type: audio/x-wav; name=&#34;readme.exe&#34;
Content-Transfer-Encoding: base64 Content-ID: &amp;lt;EA4DMGBP9p&amp;gt; TVqQAAMAAAAEAAAA//8AALgAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAA2AAAAA4fug4AtAnNIbgBTM0hVGhpcyBwcm9ncmFtIGNhbm5vdCBiZSBydW4gaW4gRE9TIG1v ZGUuDQ0KJAAAAAAAAAA11CFvcbVPPHG1TzxxtU88E6pcPHW1TzyZqkU8dbVPPJmqSzxytU88cbVO
... ... ... ... ... ... ... ...
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=

--====_ABC1234567890DEF_====&lt;/blockquote&gt;
它 将一个可执行文件作为资源嵌入了框架型页面，却声明这段可执行代码是波形声音类型。由于当时微软的IE(版本5.0及以下)存在重大安全漏洞，没有检查 Content-Type与name的扩展名是否匹配，于是就被轻易骗过了，致使点选或打开邮件时自动运行了这个“readme.exe”，机器就感染上 病毒。带毒的机器利用地址簿向别人发送带毒的邮件，一传十，十传百，Nimda蠕虫大行其道。

纵观历史，病毒刚出来时是厉害，但没有任何一种能够持续肆虐下去。Nimda如此，SARS亦当如此。曰：“多难兴邦，众志成城”，又曰：“非典终将倒下，城市精神永存”，相信我们定能很快战胜“非典”!

病毒库升级是跟在新病毒屁股后进行的，不要过分依赖杀毒软件。一个良好的习惯是关闭邮件预览功能，或者设定预览纯文本部分，先查看邮件源码，确信排除病毒嫌疑后再打开。对陌生人发来的带超文本正文的邮件，尤其要当心。永远不要在邮件客户端软件内直接打开附件。

&lt;strong&gt;Q&lt;/strong&gt; 一些垃圾邮件采取隐藏发件人的方式，如何追查它们来自哪里？

&lt;strong&gt;A&lt;/strong&gt; 从上面的邮件头域名表中可以看出，邮件的创建者可以掌握大部分的域的内容，但Received等域由各级服务器自动添加，发件人是鞭长莫及。垃圾邮件一般 采用了群发软件发送，邮件头的From域(发件人地址)可以任意伪造，甚至写成收件人地址(收到了自己并没有发过的垃圾邮件，气愤吧？)。查看 Received域(传输路径)链可以找到真正的出处。每个服务器添加的Received语句都在邮件首，故最下面一个Received就包含了发件人所 用的SMTP或HTTP服务器，及最初的网关外部IP地址。

Receive语句的基本格式是：from A by B。A为发送方，B为接收方。例如：
&lt;blockquote&gt;Received: (qmail 45304 invoked from network); 4 May 2003 17:05:47 -0000 Received: from unknown (HELO bjapp9.163.net) (202.108.255.197) by 202.106.182.244 with SMTP; 4 May 2003 17:05:47 -0000 Received: from localhost (localhost [127.0.0.1]) by bjapp9.163.net (Postfix) with SMTP id E1C761D84C631 for &amp;lt;bhw98@sina.com&amp;gt;; Mon, 5 May 2003 01:07:26 +0800 (CST) Received: from fanyingxxxx@tom.com (unknown [211.99.162.194]) by bjapp9.163.net (Coremail) with SMTP id OgEAAM1ItT7MNaLC.1 for &amp;lt;bhw98@sina.com&amp;gt;; Mon, 05 May 2003 01:07:26 +0800 (CST)&lt;/blockquote&gt;
从 上面的例子中不难看出，该邮件的传输路径是：211.99.162.194 → bjapp9.163.net (Coremail 202.108.255.197?) → bjapp9.163.net (Postfix, 202.108.255.197?) → 202.106.182.244。恰好出现了发件人邮箱fanyingxxxx@tom.com，但多数情况不一定能列出来。

此例的localhost [127.0.0.1]，意味着bjapp9.163.net上安装了邮件服务代理性质的软件。

&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>wordpress自定义个性化首页</title>
      <link>http://www.daniex.tk/blog/2011/wordpress-custom-home-page/</link>
      <pubDate>Sat, 19 Nov 2011 09:33:37 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2011/wordpress-custom-home-page/</guid>
      <description>&lt;p&gt;自己好不容易折腾了个wordpress博客，发现所有人的首页样式都大同小异，是不是很没创意，很扫兴？下面就来说说如何制作一个wordpress个性化首页，让你随心所欲的改变首页的样式，让你有个不一样的主页。最后效果如我的&lt;a title=&#34;澄清的半亩方糖&#34; href=&#34;http://danie.info&#34; target=&#34;_blank&#34;&gt;&lt;strong&gt;首页&lt;/strong&gt;&lt;/a&gt;，截图如下：
&lt;p style=&#34;text-align: center;&#34;&gt;&lt;img class=&#34;aligncenter size-full wp-image-974&#34; title=&#34;ss&#34; src=&#34;http://daniex.info/wp-content/uploads/2011/11/ss.jpg&#34; alt=&#34;&#34; width=&#34;590&#34; height=&#34;482&#34; /&gt;&lt;/p&gt;
&amp;nbsp;
&lt;div style=&#34;background-color: #e3e3e3;&#34;&gt;
&lt;h2&gt;一、 设置wordpress首页&lt;/h2&gt;
&lt;/div&gt;
wordpress有设置page页作为默认首页的功能，下面的方法就是自定义一个page也模板，然后添加一个用这个模板制作的page页，最后将这个page页设为首页。&lt;/p&gt;

&lt;p&gt;1) ftp或者cpanel到部署wordpress空间或其他。复制wordpress主题目录下的page.php文件，重名名。比如，找到文件（wp目录）/wp-content/themes/zbench/page.php 重命名为 myhomepage.php&lt;/p&gt;

&lt;p&gt;2) 用文本编辑器打开myhomepage.php，例如用记事本打开，在文件首位添加以下代码：
&lt;blockquote&gt;&amp;lt;?php
/*
Template Name: 首页
*/
?&amp;gt;&lt;/blockquote&gt;
“Template Name : ” 后的文字可以是任意的。这样我们就添加了一个新的page页模板。自定义的首页内容其实就是这个myhomepage.php的内容。如何设计修改这个文件，建立自己的个性化首页，会在后面提到。我们先将它设为首页。&lt;/p&gt;

&lt;p&gt;3) 添加一个新的page页：浏览器登录wordpress后台控制面板，dashboard -&amp;gt;pages -&amp;gt; add new。 输入标题，在右方page attributes 面板中会有parent 和 template 的下拉框，在模板下拉框中选择刚刚添加的模板。如图，我添加的模板名字叫“首页”，我就选择它。&lt;/p&gt;

&lt;p&gt;&lt;img class=&#34;aligncenter size-full wp-image-961&#34; title=&#34;selecttemplate&#34; src=&#34;http://daniex.info/wp-content/uploads/2011/11/selecttemplate.jpg&#34; alt=&#34;&#34; width=&#34;281&#34; height=&#34;253&#34; /&gt;选择好后，给这个page也命名，我是在title那输入的“首页”。然后就可以发表了，其他的内容什么可以都不用写。&lt;/p&gt;

&lt;p&gt;4) 设置首页的最后一步，点击后台的reading设置项：dashboard -&amp;gt; settings -&amp;gt; reading。在第一个设置项目里选择第二项 a static page ，然后再它下方的第一个下拉选项框里选则刚刚给page页设置的名字。比如我的“首页”。&lt;/p&gt;

&lt;p&gt;&lt;img class=&#34;aligncenter size-full wp-image-962&#34; title=&#34;setreading&#34; src=&#34;http://daniex.info/wp-content/uploads/2011/11/setreading.png&#34; alt=&#34;&#34; width=&#34;552&#34; height=&#34;506&#34; /&gt;点击 save changes 保存配置。&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;这样，我们把首页重新设置好了。这个时候访问首页的时候我们会发现，我们的首页除了头上的标题名称、侧边栏、底部栏之外就什么都没有。&lt;/p&gt;

&lt;p&gt;&amp;nbsp;
&lt;div style=&#34;background-color: #e3e3e3;&#34;&gt;
&lt;h2&gt;二、 设计自己的wordpress首页&lt;/h2&gt;
&lt;/div&gt;
我们已经把wordpress的首页换掉，但是这个首页现在是一片空白，我们要怎么去填充这片空白呢？如果你有html、css、js功底，那就是你一展身手的时候。如果水平一般，那也没关系，能看懂一点点代码，那就有办法去使用一些好的模板，好的插件，设计出一个自己满意的首页还是可以的。我就只是能看懂代码的那种，根本不熟悉网页前端开发。
&lt;h4&gt;&lt;strong&gt;方法一&lt;/strong&gt;&lt;/h4&gt;
怎么给这个首页填充内容，最简单的方法就是，编辑我们之前添加的page页。之前我们并没有在文章内容里添加任何东西。只要你有好内容，好方案，就可以像写一个新的文章一样这里出一个你自己的主页。
&lt;h4&gt;&lt;strong&gt;方法二&lt;/strong&gt;&lt;/h4&gt;
这个方法就需要去修改我们的myhomepage.php文件。前端开发的牛人大有人在，我也不多说。就把我的一些代码贴出来，有心思看到朋友可以参考下。主要用到的几个函数我罗列一下：
&lt;blockquote&gt;&amp;lt;?php if(function_exists(&amp;lsquo;wp_thumbnails_for_category&amp;rsquo;)) { wp_thumbnails_for_category(&amp;lsquo;id=7&amp;amp;num=1&amp;rsquo;); } ?&amp;gt;&lt;/blockquote&gt;
这是我使用的wp-thumbnail插件提供的函数，用于显示分类中的文章和缩略图。在wp-thumbnail插件设置中设置好分类文章的相关数据，如图片大小、标题位置。然后再这里调用。id=7表示文章分类id为7的分类下的文章，num=1表示显示一篇。文章分类ID是几可以参考&lt;a title=&#34;wordpress查看分类category的id&#34; href=&#34;http://daniex.info/view-category-id-wordpress.html&#34; target=&#34;_blank&#34;&gt;&lt;strong&gt;这篇文章&lt;/strong&gt;&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;嵌入的探讨tt1 tt2 的css代码是控制左侧栏目的背景。另外有block1和block2的代码是用来控制左右两部分的布局。
&lt;blockquote&gt;.tt1 {background:#E3E3E3;width:270px;height350px}
.tt2 {background:#E3E3E3;width:210px;height310px;margin:30px}&lt;/p&gt;

&lt;p&gt;.block2 { float:left; width:250px; height:700px}
.block3 { float:right; width:350px; height:700px}&lt;/blockquote&gt;
中间栏的随机文章和标题评论控制是用这些函数：
&lt;blockquote&gt;$args = array( &amp;lsquo;numberposts&amp;rsquo; =&amp;gt; 5, &amp;lsquo;orderby&amp;rsquo; =&amp;gt; &amp;lsquo;rand&amp;rsquo;, &amp;lsquo;category&amp;rsquo; =&amp;gt; 7 );
$rand_posts = get_posts( $args );
foreach( $rand_posts as $post ) : setup_postdata($post); ?&amp;gt;&lt;/p&gt;

&lt;p&gt;。。。&lt;/blockquote&gt;
&amp;nbsp;
&lt;blockquote&gt;&amp;lt;?php if(function_exists(&amp;lsquo;the_views&amp;rsquo;)) { echo &amp;ldquo; | &amp;ldquo;;the_views(); } ?&amp;gt;&lt;/blockquote&gt;
这段代码是用了postviews+的插件，用于统计文章浏览次数。&lt;/p&gt;

&lt;p&gt;更多代码：
&lt;blockquote&gt;&amp;lt;?php
/*
Template Name: 首页
*/
?&amp;gt;
&amp;lt;?php get_header() ?&amp;gt;
&amp;lt;div id=&amp;ldquo;content&amp;rdquo;&amp;gt;
&amp;lt;?php the_post(); ?&amp;gt;
&amp;lt;div &amp;lt;?php post_class(&amp;lsquo;post post-page&amp;rsquo;); ?&amp;gt; id=&amp;ldquo;post-&amp;lt;?php the_ID(); ?&amp;gt;&amp;ldquo;&amp;gt;
&amp;lt;div class=&amp;ldquo;block2&amp;rdquo;&amp;gt;
&amp;lt;h2&amp;gt;&amp;lt;a href=&amp;ldquo;&lt;a href=&#34;http://daniex.info/category/coding&amp;quot;&amp;gt;编程开发&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&amp;lt;span&amp;gt;C/C++&#34;&gt;http://daniex.info/category/coding&amp;quot;&amp;gt;编程开发&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&amp;lt;span&amp;gt;C/C++&lt;/a&gt; java C# wpf php&amp;hellip;&amp;lt;/span&amp;gt;
&amp;lt;div class=&amp;ldquo;tt1&amp;rdquo;&amp;gt;
&amp;lt;div class=&amp;ldquo;tt2&amp;rdquo;&amp;gt;
&amp;lt;?php if(function_exists(&amp;lsquo;wp_thumbnails_for_category&amp;rsquo;)) { wp_thumbnails_for_category(&amp;lsquo;id=7&amp;amp;num=1&amp;rsquo;); } ?&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;div class=&amp;ldquo;tt1&amp;rdquo;&amp;gt;
&amp;lt;div class=&amp;ldquo;tt2&amp;rdquo;&amp;gt;
&amp;lt;?php if(function_exists(&amp;lsquo;wp_thumbnails_for_category&amp;rsquo;)) { wp_thumbnails_for_category(&amp;lsquo;id=7&amp;amp;num=1&amp;amp;order=recent&amp;rsquo;); } ?&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;style&amp;gt;
.tt1 {background:#E3E3E3;width:270px;height350px}
.tt2 {background:#E3E3E3;width:210px;height310px;margin:30px}
&amp;lt;/style&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;div class=&amp;ldquo;block3&amp;rdquo;&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;?php
$args = array( &amp;lsquo;numberposts&amp;rsquo; =&amp;gt; 5, &amp;lsquo;orderby&amp;rsquo; =&amp;gt; &amp;lsquo;rand&amp;rsquo;, &amp;lsquo;category&amp;rsquo; =&amp;gt; 7 );
$rand_posts = get_posts( $args );
foreach( $rand_posts as $post ) : setup_postdata($post); ?&amp;gt;
&amp;lt;h3&amp;gt;&amp;lt;a href=&amp;rdquo;&amp;lt;?php the_permalink(); ?&amp;gt;&amp;ldquo;&amp;gt;&amp;lt;?php the_title(); ?&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/h3&amp;gt;
&amp;lt;?php if (&amp;lsquo;open&amp;rsquo; == $post-&amp;gt;comment_status) { ?&amp;gt;
&amp;lt;div&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;span&amp;gt;&amp;lt;?php the_time(get_option( &amp;lsquo;date_format&amp;rsquo; )); ?&amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;span id=&amp;ldquo;gotocomments&amp;rdquo;&amp;gt;&amp;lt;?php comments_popup_link(&lt;strong&gt;(&amp;lsquo;0 评论&amp;rsquo;, &amp;lsquo;zbench&amp;rsquo;), __(&amp;lsquo;1 评论&amp;rsquo;, &amp;lsquo;zbench&amp;rsquo;), &amp;lsquo;% &amp;lsquo;.&lt;/strong&gt;(&amp;rsquo; 评论&amp;rsquo;, &amp;lsquo;zbench&amp;rsquo;)); ?&amp;gt;&amp;lt;?php if(function_exists(&amp;lsquo;the_views&amp;rsquo;)) { echo &amp;ldquo; | &amp;ldquo;;the_views(); } ?&amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;div&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;!&amp;ndash;&amp;lt;div&amp;gt;
&amp;lt;?php if ( $options[&amp;lsquo;excerpt_check&amp;rsquo;]==&amp;lsquo;true&amp;rsquo; ) { the_excerpt(&lt;strong&gt;(&amp;rsquo;&amp;amp;raquo; Read more&amp;hellip;&amp;lsquo;,&amp;lsquo;zbench&amp;rsquo;)); } else { the_content(&lt;/strong&gt;(&amp;rsquo;&amp;amp;raquo; Read more&amp;hellip;&amp;lsquo;,&amp;lsquo;zbench&amp;rsquo;)); } ?&amp;gt;
&amp;lt;/div&amp;gt; END entry &amp;ndash;&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;?php if(is_sticky()) { ?&amp;gt;
&amp;lt;div&amp;gt;&amp;lt;p&amp;gt;&amp;lt;?php _e(&amp;lsquo;This is a sticky post!&amp;rsquo;, &amp;lsquo;zbench&amp;rsquo;); ?&amp;gt; &amp;lt;a href=&amp;rdquo;&amp;lt;?php the_permalink() ?&amp;gt;&amp;ldquo;&amp;gt;&amp;lt;?php _e(&amp;lsquo;continue reading?&amp;rsquo;, &amp;lsquo;zbench&amp;rsquo;); ?&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;?php } ?&amp;gt;
&amp;lt;?php } else { ?&amp;gt;
&amp;lt;div style=&amp;ldquo;height:1px;&amp;rdquo;&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;?php } ?&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;?php echo mb_strimwidth(strip_tags(apply_filters(‘the_content’, $post-&amp;gt;post_content)), 0, 100,&amp;ldquo;&amp;hellip;&amp;rdquo;); ?&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;
&amp;lt;?php endforeach; ?&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/div&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/div&amp;gt;&amp;lt;!&amp;ndash; END post &amp;ndash;&amp;gt;
&amp;lt;/div&amp;gt;&amp;lt;!&amp;ndash;content&amp;ndash;&amp;gt;
&amp;lt;?php get_sidebar() ?&amp;gt;
&amp;lt;?php get_footer() ?&amp;gt;&lt;/blockquote&gt;
&amp;nbsp;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>浪潮之巅</title>
      <link>http://www.daniex.tk/blog/2011/the-top-of-the-wave/</link>
      <pubDate>Mon, 14 Nov 2011 06:35:52 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2011/the-top-of-the-wave/</guid>
      <description>&lt;p&gt;翻完浪潮之巅，心中感慨。短短百多年的岁月，多少巨鳄崛起，而后又消沉；多少新人崭露头角，而后灿烂了绝大部分的人生；还有那一群群的不可或缺的人们，为了事业，为了企业，满怀激情的投入到工作中。最终，那段汹涌澎湃的浪潮，通过作者独特的视角，展现在我眼前。&lt;/p&gt;

&lt;p&gt;这百余年，是高科技企业的现代史，帝国崛起，英雄辈出。以前提到历史，想到的是中华五千年的浩瀚积淀。只有那里，才有大浪淘沙，才有骏马奔腾，才有纷纭突变的大气象大事迹。后来发现，历史也是文学，不同的时代有不同的表现方式，有不同的主题。再后来，家族也是历史，考究下谁家姓氏由来，就能看到一个家族的浮浮沉沉，或辉煌、或没落、或东山再起。现在，企业也是历史，而且是进行中的历史，任由着这一群群弄潮儿创造着。&lt;/p&gt;

&lt;p&gt;不同于大败局，他讲述一个个帝国的崛起、沉浮。最终那一个个帝国会走向何处？有的已近消逝，有的正在巅峰，有的还在泥潭中挣扎。浮浮沉沉的事迹更让人体味各种百千端滋味。大败局的对象生命都太短暂。比伤仲永更悲惨，小时了了，然后就夭折了，连大未必佳的状态都没有体会到。&lt;/p&gt;

&lt;p&gt;从摩托罗拉的故事里看真是三十年河东三十年河西，诺基亚的现状更是让人对摩托罗拉一阵惋惜。两代通讯界的帝王再走上神坛之后都无奈被赶下台。曾经的摩托罗拉微机处理器上对抗英特尔，在手机上对抗诺基亚，在信号处理器（DSP）上对抗德州仪器（TI），还执行至今让人感叹不已的“铱星计划”，分光的一时无两。而如今，没落贵族想恢复荣光，真有很长一段路要走。
&lt;img class=&#34;aligncenter size-full wp-image-929&#34; title=&#34;2011071216110438&#34; src=&#34;http://daniex.info/wp-content/uploads/2011/11/2011071216110438.jpg&#34; alt=&#34;&#34; width=&#34;312&#34; height=&#34;426&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>wp搬家血泪史</title>
      <link>http://www.daniex.tk/blog/2011/wp-tragic-history-of-moving/</link>
      <pubDate>Mon, 28 Feb 2011 13:38:00 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2011/wp-tragic-history-of-moving/</guid>
      <description>&lt;p&gt;之前blog先是无法访问，后来是显示空白页或者it works！这样的非正常状态持续有三个多月。我也是一直忙这忙那的没把心思花这上面。就让它这么一直流血流血流血流血地濒临天堂。&lt;/p&gt;

&lt;p&gt;一开始无法访问的原因，是，当时的共享ip空间的ip被墙，悲剧的无法访问。之后断断续续的找找有没有地方安置blog。不巧接着俺又辞职换工作，奔波找工作折腾得我就没打理它。再往后工作有着落后，弄了个vps玩玩，结果CentOS+LAMP弄了一半，没有完全按着攻略做，折腾出一些问题。访问很不稳定，时不时的变成It works等等问题。指导最近，重新弄了个共享空间，搬家，才算告一段落。罗列下遇到的问题和一些解决问题的方向作参考，由于时间过得久了，具体的方法还需另外百度谷歌去。&lt;/p&gt;

&lt;p&gt;1、 LAMP（CentOS） 相关&lt;/p&gt;

&lt;p&gt;要弄技术那就好好折腾，找个教程看看，然后看下各个参数设置要设置成什么样，有什么关联。我就是没设置好，弄的时不时的来个“It works！”的提示。真打击，回头继续折腾！&lt;/p&gt;

&lt;p&gt;折腾的那个vps是独立128M内存，共享最大到256M。我装上LAMP后，启动程序，内存涨到220M+，收到邮件警告内存使用过高。原因是没有好好设置好Mysql的参数。在网上找了数据库配置的文章后重新设置参数，启动php、Mysql后内存用了80M左右。当然还有更省内存的配置。&lt;/p&gt;

&lt;p&gt;2、 乱码&lt;/p&gt;

&lt;p&gt;这个是一般是编码问题，mysql4.0 会用latin编码存数据，我们一般用的是utf8，GBK等，所以会有乱码。&lt;/p&gt;

&lt;p&gt;解决方案有几个：1）用数据库指令导出抓换编码导入。&lt;/p&gt;

&lt;p&gt;2）phpmyadmin导入导出。&lt;/p&gt;

&lt;p&gt;3、 wp显示空白页&lt;/p&gt;

&lt;p&gt;这个症状比较多，有的个别页显示正常有的任何页不能显示。诱因不少，说几个方法：&lt;/p&gt;

&lt;p&gt;1）重新配置wp-config.php。&lt;/p&gt;

&lt;p&gt;2）重新配主题。&lt;/p&gt;

&lt;p&gt;3）插件冲突，修改删除插件。&lt;/p&gt;

&lt;p&gt;4、无法post或comment&lt;/p&gt;

&lt;p&gt;这个问题我也不知道为什么，估计是LAMP配置哪出问题了，网上也没有搜到解决方案。&lt;/p&gt;

&lt;p&gt;就记得这么些问题了，记起来再添。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>WordPress评论显示倒序</title>
      <link>http://www.daniex.tk/blog/2011/wordpress-comment-reverse/</link>
      <pubDate>Wed, 23 Feb 2011 10:40:27 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2011/wordpress-comment-reverse/</guid>
      <description>&lt;p&gt;之前自制留言板的时候实现过将评论顺序改为倒序。具体可以看&lt;span style=&#34;color: #ff0000;&#34;&gt;&lt;a title=&#34;WordPress自制留言板&#34; href=&#34;http://daniex.info/wordpress-message-board.html&#34; target=&#34;_blank&#34;&gt;这篇&lt;/a&gt;&lt;/span&gt;文章。现在重新折腾blog，不想改太多代码，于是干脆把所有评论都将最新的显示在最上方。&lt;/p&gt;

&lt;p&gt;参考&lt;a title=&#34;修改WordPress评论显示顺序为倒序&#34; href=&#34;http://www.yulaoda.com/comments-desc/&#34; target=&#34;_blank&#34;&gt;这篇&lt;/a&gt;文章进行修改。他的两个方法中，方法二修改类似自制留言板的情况，但是这次在这个版本的zBench的主题上修改没有任何效果。在按照方法一修改后效果看&lt;span style=&#34;color: #ff0000;&#34;&gt;&lt;a title=&#34;留言板&#34; href=&#34;http://daniex.info/messageboard&#34; target=&#34;_blank&#34;&gt;我的留言板&lt;/a&gt;&lt;/span&gt;。&lt;/p&gt;

&lt;p&gt;记录操作方法如下：&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1、修改comments-template.php文件&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;步骤：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;a：进入Wordpress安装目录下的wp-includes目录找到comment-template.php文件；&lt;/p&gt;

&lt;p&gt;b：找到并替换代玛：将ORDER BY comment_date_gmt替换成ORDER BY comment_date DESC（共两处）；&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2、修改评论模板comments.php文件&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;步骤：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;在评论模板comments.php中找到下列语句：&lt;/p&gt;

&lt;p&gt;foreach ($comments as $comment)&lt;/p&gt;

&lt;p&gt;替换为&lt;/p&gt;

&lt;p&gt;foreach (array_reverse($comments) as $comment)&lt;/p&gt;

&lt;p&gt;=====================傻逼的分割线=======================&lt;/p&gt;

&lt;p&gt;其实，Dashboard-&amp;gt;setting-&amp;gt;discussion里面有排序选项的。。。。&lt;/p&gt;

&lt;p&gt;Other comment settings-&amp;gt;Comments should be displayed with the
&lt;select id=&#34;comment_order&#34; name=&#34;comment_order&#34;&gt;&lt;option value=&#34;asc&#34;&gt;older&lt;/option&gt;&lt;option selected=&#34;selected&#34; value=&#34;desc&#34;&gt;newer&lt;/option&gt;&lt;/select&gt;&lt;/p&gt;

&lt;p&gt;comments at the top of each page&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>有关俺的Nokia5800</title>
      <link>http://www.daniex.tk/blog/2010/the-is-nokia5800/</link>
      <pubDate>Mon, 30 Aug 2010 08:00:31 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2010/the-is-nokia5800/</guid>
      <description>&lt;p&gt;ht同学念念叨叨了好一阵子说要换个新手机，想起来好久没折腾手机这玩意儿了。&lt;/p&gt;

&lt;p&gt;俺的破手机就Nokia 5800，已经被俺一路从V10一直刷到现在的V50。嗯，错了，中间SymbianS60V5的V20固件没有用过。刷机教程都是&lt;a href=&#34;http://bbs.dospy.com/&#34; target=&#34;_blank&#34;&gt;&lt;span style=&#34;color: #0000ff;&#34;&gt;塞班智能手机论坛&lt;/span&gt;&lt;/a&gt;找的。那是个好地方，有着各种玩手机教程。从手机证书制作，到教你如何签名软件，再到如何刷机，教程应有尽有。而且，这是个交流分享各种壁纸、皮肤、铃声、软件的好地方。各种优秀资源都有人拿来分享，包您把自己的手机折腾的花枝招展。。。&lt;/p&gt;

&lt;p&gt;呃，我这个不是软文   :arrow:&lt;/p&gt;

&lt;p&gt;言归正传。这个手机一直是用凤凰刷机软件刷的，出了装了卸pc套件麻烦点外，其他都好说。教程问谷歌。后来升V50固件的时候尝试了下wifi自动更新，那才是方便、快捷、安心、省事啊！于是乘兴致拼命折腾，结果玩出了问题。心灰意冷，手机软格。没有主题，随手弄了个壁纸就一直用到现在。&lt;/p&gt;

&lt;p&gt;今儿一看，发现现在居然都刷C6的系统了？！&lt;/p&gt;

&lt;p&gt;震惊！&lt;/p&gt;

&lt;p&gt;俺好落伍啊，有空再玩玩去~&lt;/p&gt;

&lt;p&gt;列下现在手机上的软件：&lt;/p&gt;

&lt;p&gt;Gravity、UCweb、UC桌面、i短信、熊猫看书、google地图、Y-Browser、信易安、qq、飞信。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>相册、图床制作，WordPress图片站、插件相关</title>
      <link>http://www.daniex.tk/blog/2010/photo-gallery/</link>
      <pubDate>Tue, 03 Aug 2010 06:42:06 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2010/photo-gallery/</guid>
      <description>&lt;p&gt;之前回家了一趟，回杭后工作上又有些变动。这一篇出来的比较混乱。这里简单说说我所知道的一些图片站点的建设，wp相关插件。&lt;/p&gt;

&lt;p&gt;1、WordPress图片站&lt;/p&gt;

&lt;p&gt;将相当于把图片作为一个post发表。有比较好的显示方式，麻烦在于上传图片，发布同步稍显繁琐。&lt;span style=&#34;text-decoration: underline;&#34;&gt;&lt;span style=&#34;color: #0000ff;&#34;&gt;&lt;a href=&#34;http://www.chinaz.com/Design/CoolSite/0910911B2009.html&#34; target=&#34;_blank&#34;&gt;&lt;span style=&#34;color: #0000ff;&#34;&gt;这里&lt;/span&gt;&lt;/a&gt;&lt;span style=&#34;color: #0000ff;&#34;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;有几个图片站主题推荐，可以看看参考下效果。&lt;/p&gt;

&lt;p&gt;2、在WordPress里面插图、图片的显示，有很多很多方法，插件数不胜数。比如NextGen Gallery，slideshare， cincopa等等，各种slideshow、各种gallery。试过才知道。本站&lt;a href=&#34;http://daniex.info/album/&#34; target=&#34;_blank&#34;&gt;&lt;span style=&#34;color: #0000ff;&#34;&gt;相册page&lt;/span&gt;&lt;/a&gt;里的是用NextGen Gallery生成，mvp的blog中的&lt;a href=&#34;http://www.mvpwinner.com/about-mvp/&#34;&gt;&lt;span style=&#34;color: #0000ff;&#34;&gt;关于页&lt;/span&gt;&lt;/a&gt;是用的slideshare，cincopa的例子在&lt;a href=&#34;http://mimisunanduncleliu.com/blog/?page_id=92&#34; target=&#34;_blank&#34;&gt;&lt;span style=&#34;color: #0000ff;&#34;&gt;这里&lt;/span&gt;&lt;/a&gt;，是咪咪孙&amp;amp;刘大叔的相册。&lt;/p&gt;

&lt;p&gt;3、自建图床&lt;/p&gt;

&lt;p&gt;这个也有很多手段，建成的图片站各有特色，推荐zenphoto&lt;em&gt;，&lt;/em&gt;Menalto Gallery，Coppermine，piwigo。blog图片由图床接入，可以省下大量的网站空间。 更多推荐看&lt;a href=&#34;http://www.chinaz.com/Webmaster/Club/01045Z432009.html&#34; target=&#34;_blank&#34;&gt;&lt;span style=&#34;color: #0000ff;&#34;&gt;这里&lt;/span&gt;&lt;/a&gt;，和&lt;a href=&#34;http://blogunion.org/wordpress/wordpress-plugins/five-wordpress-gallery-plugins.html&#34; target=&#34;_blank&#34;&gt;&lt;span style=&#34;color: #0000ff;&#34;&gt;这里&lt;/span&gt;&lt;/a&gt;。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>WordPress自制留言板</title>
      <link>http://www.daniex.tk/blog/2010/wordpress-message-board/</link>
      <pubDate>Fri, 02 Jul 2010 12:35:45 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2010/wordpress-message-board/</guid>
      <description>&lt;p&gt;换了个皮肤，把一些代码重新写好，又把之前就像做的留言板做了起来。&lt;/p&gt;

&lt;p&gt;我的留言板制作主要参考大大有名的&lt;a href=&#34;http://www.sbtalk.com.cn/&#34;&gt;sbtalk&lt;/a&gt;上，大大有名的&lt;a href=&#34;http://www.sbtalk.com.cn/2007/06/16/wordpress_guestbook.html&#34;&gt;简单5步，制作wordpress留言板&lt;/a&gt;一文制作的。只是其成文比较早，wp的版本又不断更新，文中所述方法里面就出现了一点点没跟上wp版本脚步的小问题。&lt;/p&gt;

&lt;p&gt;制作过程中前面几步是都没有问题的，再次我也不赘述了。自己参考去。这里说说文中第三大节关于把留言板做的更完美这个部分。
1）去掉发布日期：
这个部分各个模板都有不同，看得懂代码，把该去掉的时间去掉便是，代码去掉的部分形式和下图不同是很正常的。
&lt;a rel=&#34;attachment wp-att-174&#34; href=&#34;http://daniex.info/wordpress-message-board.html/guestbookdeletedate&#34;&gt;&lt;img class=&#34;aligncenter size-full wp-image-174&#34; title=&#34;guestbookdeletedate&#34; src=&#34;http://hostill.com/~daniex/wp-content/uploads/2010/07/guestbookdeletedate.png&#34; alt=&#34;&#34; width=&#34;407&#34; height=&#34;307&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2）自定义“留言”样式的提示文本
该改啥改啥，照着五步法原文自己干去。&lt;br /&gt;
3）最新留言显示在顶部
这个部分就有些不一样了，原文说的是wp v2.7以前的情况，现在略有不同，改下面代码&lt;br /&gt;
&lt;pre class=&#34;brush:php&#34;&gt;
// for WordPress 2.7 or higher
if (function_exists(&amp;lsquo;wp_list_comments&amp;rsquo;)) {
    wp_list_comments(&amp;lsquo;type=comment&amp;amp;callback=custom_comments&amp;rsquo;);
    // for WordPress 2.6.3 or lower
} else {
    foreach ($comments as $comment) {
        if($comment-&amp;gt;comment_type != &amp;lsquo;pingback&amp;rsquo; &amp;amp;&amp;amp; $comment-&amp;gt;comment_type != &amp;lsquo;trackback&amp;rsquo;) {
        custom_comments($comment, null, null);
        }
    }
}
&lt;/pre&gt;&lt;br /&gt;
为
&lt;br /&gt;&lt;pre class=&#34;brush:php&#34;&gt;
// for WordPress 2.7 or higher
if (function_exists(&amp;lsquo;wp_list_comments&amp;rsquo;)) {
    wp_list_comments(&amp;lsquo;type=comment&amp;amp;callback=custom_comments&amp;amp;reverse_top_level=DESC&amp;rsquo;);
// for WordPress 2.6.3 or lower
} else {
    foreach (array_reverse($comments) as $comment) {
        if($comment-&amp;gt;comment_type != &amp;lsquo;pingback&amp;rsquo; &amp;amp;&amp;amp; $comment-&amp;gt;comment_type != &amp;lsquo;trackback&amp;rsquo;) {
            custom_comments($comment, null, null);
        }
    }
}
&lt;/pre&gt;
&lt;br /&gt;
这样就能让留言倒叙排列了。
&lt;br /&gt;&lt;br /&gt;
在折腾完留言板功能后，多嘴再说两句。之前我用的一个模板代码看起来稍有些麻烦，为了这个功能，折腾半天，无果，水平不够。现在一拍脑袋，丫的我之前怎么就没想到，找个简单的主题把要用的这两页代码拷贝过来，不就一样做成留言板了！啧啧，榆木脑袋啊！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>杂记</title>
      <link>http://www.daniex.tk/blog/2010/mix/</link>
      <pubDate>Thu, 01 Jul 2010 13:31:27 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2010/mix/</guid>
      <description>&lt;p&gt;晚上折腾半宿的的WordPress，各种不顺心，在这里发发牢骚。
原来那个主题看着还是比较顺眼的，虽然昨天就有念头就想换了它。 好吧，我承认我不专一了。:oops:
换掉它的根本原因，具体的解释下。这个主题是有付费版本的，我用的是对应的免费版，其代码一个文件引用一个文件，封装的解耦的太完美了。虽然本人学软件的，但是php之前没有玩过，现在也没功夫系统地去学。所以，在按着网上教程一个文件一个文件地找，一段代码一段代码地查的时候，发现，俺要实现一个功能，其操作和教程说的相差的太远了。有一些不同俺就忍了，改改也没问题，但这差的也太多了！于是乎，果断换主题。
接着使用的是wp 3.0默认的一个主题，想着既然是默认的，代码总归比较随大流了吧。接着动手把分类加到导航栏，找不到wp_list_pages， :cry: 。继续换主题！
现在这个本人看着蛮顺眼的，其他就不知了。代码看上去泯然众人矣，小问题还是不少的，回复的表情不显示啦，之前改的代码这边要重新改啦，插件重新配置啦，啦啦啦啦各种细节 :roll: 继续折腾。&lt;/p&gt;

&lt;p&gt;图片名：来晚了！
&lt;a rel=&#34;attachment wp-att-147&#34; href=&#34;http://daniex.info/2010/07/mix/27512_540/&#34;&gt;&lt;img class=&#34;aligncenter size-full wp-image-147&#34; title=&#34;27512_540&#34; src=&#34;http://hostill.com/~daniex/wp-content/uploads/2010/07/27512_540.jpg&#34; alt=&#34;&#34; width=&#34;540&#34; height=&#34;641&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>WordPress 手机端插件</title>
      <link>http://www.daniex.tk/blog/2010/wordpress-mobile/</link>
      <pubDate>Mon, 28 Jun 2010 12:26:16 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2010/wordpress-mobile/</guid>
      <description>&lt;p&gt;今天折腾了俩wp手机端插件，分享下。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://crowdfavorite.com/wordpress/&#34; target=&#34;_blank&#34;&gt;WordPress Mobile Edition&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;装这个插件需要手工的干点事。直接在后台搜索到插件安装，激活插件后他会提示插件安装不正确。按说明移动两个文件，再激活下插件就能正常使用了。如果是直接下载压缩包，也是上传下文件，然后激活。具体做法是：&lt;/p&gt;

&lt;p&gt;1、将 wp-mobile.php 上传到插件目录wp-content/plugins下。&lt;/p&gt;

&lt;p&gt;2、将carrington-mobile-*** 这个文件夹上传到模板目录wp-content/themes下。&lt;/p&gt;

&lt;p&gt;3、激活插件。&lt;/p&gt;

&lt;p&gt;没有插件安装后浏览网站的截图，不过可以参考下面那个插件的截图。页面主要内容为文字标题，干净清爽。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://wordpress.org/extend/plugins/wordpress-mobile-pack/&#34; target=&#34;_blank&#34;&gt;WordPress Mobile Pack&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;这个插件安装就方便多了，安装激活后就可进行插件的设置。安装还自带几个手机端主题。下图是插件自带的screenshots&lt;/p&gt;

&lt;p&gt;&lt;a rel=&#34;attachment wp-att-93&#34; href=&#34;http://daniex.info/wordpress-mobile.html/screenshot-1&#34;&gt;&lt;img class=&#34;aligncenter size-full wp-image-93&#34; title=&#34;WordPress Mobile Pack&#34; src=&#34;http://hostill.com/~daniex/wp-content/uploads/2010/06/screenshot-1.png&#34; alt=&#34;WordPress Mobile Pack截图&#34; width=&#34;530&#34; height=&#34;483&#34; /&gt;&lt;/a&gt;&lt;a rel=&#34;attachment wp-att-94&#34; href=&#34;http://daniex.info/wordpress-mobile.html/screenshot-4&#34;&gt;&lt;img class=&#34;aligncenter size-full wp-image-94&#34; title=&#34;WordPress Mobile Pack&#34; src=&#34;http://hostill.com/~daniex/wp-content/uploads/2010/06/screenshot-4.png&#34; alt=&#34;WordPress Mobile Pack截图&#34; width=&#34;530&#34; height=&#34;443&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;手机端目的是为了让手机浏览时页面布局不会变形，方便读者快速加载网页而不需要等待过多时间加载图片，并且让页面更好的适应各种大小的手机屏幕。如果博客上有较多图片，或是有较多散乱的、与页面主题无关的内容，个人建议安装个手机端插件。现在这个大屏幕手机成为主流的年代，伴随很多功能强大的手机浏览器出现，有些博客并不需要专门的手机站也一样能在浏览器中给予读者美好享受。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>中小企业博客营销实战</title>
      <link>http://www.daniex.tk/blog/2010/blog-marketing/</link>
      <pubDate>Fri, 25 Jun 2010 02:49:09 &#43;0000</pubDate>
      <author>Daniex</author>
      <guid>http://www.daniex.tk/blog/2010/blog-marketing/</guid>
      <description>&lt;div id=&#34;artibody&#34;&gt;

博客发展至今，深深地渗透着影响着生活、社会，一是“实时迅速的传播”，二是“商业的运用”，如今已经成为众多公司企业的营销利器，并且刻不容缓，企业纷纷开展博客营销，有望发展能获得更大的的突破。“博客营销”一词，作为商业人士都已经不再陌生，因为已经无处不在无时不有，理解博客营销很简单，无须过多着墨，随便翻开几个博客稍微带着学习的心态去浏览，就晓得什么是博客营销，若果文章能让你认可博主的话，并且会长期关注，那么这就是最高境界的博客营销，通过文字来卖思想人品等。注明一点，在这文章里我不会谈及太多的博客理论和博客营销理论，我只关注运用执行的实践，并且是可行的实践。

现在，很多企业都想做博客营销或已经做博客营销，但一个通病就是竟把博客视为一个类似网站的信息发布平台，说白点就是广告，发布公司介绍和产品促销信息等，已经是司空见惯了，并且已经被泛滥，几乎不能制止，唯一方法就是搜索引擎不收录博客信息。造成这一现象出现莫过于两个原因，一是对博客营销理概念理解错误，二是博客在搜索引擎的良好表现。

很多企业知道博客营销，但90%的企业都不懂博客营销，尽管网上都不乏关于博客营销的文章资讯，不过对其概念理解错误，就对一切相关的信息也会理解错误，最后会背道而驰。什么是博客营销？博客营销比传统营销更强调卖人品卖思想，个人博客就是卖人品这些，而企业博客就是卖公司的理念和文化以及各方面经验的分享等，只不过表达的方式不同而已，博客营销是通过文字去营销。其实弄懂营销的真谛和境界便能清晰什么是博客营销了，无须在乎网上或别人太多的说法，否则会对博客营销看得越深不见底，距离就会越拉越远。

博客在搜索引擎的良好表现。按本质和定位上说，可以说博客是原创资讯的采集地，尤其受搜索引擎青睐，并且有较前的排名优势，因为博客文章都被视为客观而有价值的，而搜索引擎的排名规则正好也是这样，越是有价值的资讯就会越靠前推荐给网民。其次很多的资讯型网站转载收集内容，大多倾向于博客，尤其是那些专栏博客。但可悲的是，由于很多企业尤其是那些小公司都只把博客当做为信息发布基地，并且泛滥，搜索引擎也再不像过去那样，凡是都收录，已经把门槛抬高，需要经常人工审录。博客在大众心目中的地位已经大大打了折扣。

在博客上赤裸裸地发布广告注定是失败的，尽管坚持下去，但方法用错了，所有努力都白费，极端一点的说法就是有失公司形象。以阿里巴巴博客为例，可以说阿里巴巴平台上的博客营销是博客营销的先行模范，造就了许多成功网商，并且每年度的十大博客评选，更是对博客营销的肯定，其可用价值是不可量估的。不过近些年来，形势越来越不乐观，曾马太效应现象，尤其是那些许多的小公司单位，特指业务员，他们就是一味的狂发广告，三几天不见效果，便之放弃，阿里巴巴平台里是最常见的。

很多博客挂着公司的大名，不停地发布广告信息，天天发布，但总是无人问津，坚持了好些天，还没效果，干脆不要了，连“鸡肋”都称不上，凡是这些现象，大部分都是见别人能通过博客获得订单，自己也就心血来潮尝试去做，成功的那些博客，他们背后做了些什么？为什么会成功？这些却不去关注，以为博客是神，只要发布任何信息上去都会收到效果，也太幼稚了吧。还没搞清什么是博客营销，最好别轻易去尝试，否则真的会适得其反。OK，上述说的是不懂博客营销而导致失败的原因，那么为什么那些懂博客营销的也会失败？

大部分企业都参加过网络营销培训，尤其是那些传统企业，需要通过学习后才会有方向和概念。而博客营销只是网络营销中的一小部分，但不可轻视。网络营销培训中有一则教学内容“网络推广”，分为付费推广和免费推广，而企业更关注免费推广，而博客营销就是免费推广中的最重要部分，但总体毕竟只是一小部分，所以很多培训机构都是带笔而过，现象就是1、不深度讲解博客营销的概念，2、案例都是大企业大品牌！问题就在这里。

博客营销看似美好，但执行起来为什么就是让企业步履维艰呢？刚才两点可以说明。许多的培训机构给企业输错概念或者不到位，他们仅说博客营销就是通过博客去达成销售目的，接着就说怎么操作……，通常都是教你在大量博客平台上开通博客，然后就大量的发布文章，多顶贴，发布文章的时候一定要附上回到网站的链接，没了？基本没了。那么所有企业就以为到一百个平台上开博客，然后大量发布信息，让百度和谷歌这些搜索引擎收录就行了。随后就迈过去直接讲案例，比如“南非Stormhoek公司博客卖葡萄酒、蔡明博客抢沙发赢取博洛尼沙发、五粮液结缘博友共赏美酒”等等常见的大品牌博客营销案例，这些案例都十分经典，但是可以让中小企业借鉴吗？可以被复制吗？读者先别反驳，先看下面。

可以，但很难，也可以说不行。南非Stormhoek公司卖葡萄酒案例最为经典，同时又是模式的开河者，几乎所有培训机构都采用为案例分析，但只能是启发。另外，蔡明博客抢沙发赢沙发，方式也很简单，只要在蔡明博客上根据要求来顶贴就可以获得奖品了，但需要悟醒的一点是：蔡明是新浪博客商界英才栏目的专家之一，他已经拥有了一定的名气和人气，做起来是不愁没有读者的。五粮液的“结缘博友共赏美酒”主题活动，也很简单，就是五粮液通过博客发布活动信息，让其博客报名参与，再通过五粮液挑选幸运儿博主参加此次活动，分别寄送了其新产品国邑千红供博友品尝，博友们体验新产品后，纷纷在其博客上发表了对五粮液国邑千红的口味感受和评价，实现了超低成本而快速的推广目的。这些案例看上去都很有启发性和借鉴意义，不过对中小企业（也就草根企业）而言，可望不可即。因为，首先博客营销讲创意，什么叫创意？可以理解为新奇新颖，也可以说是能够吸引眼球的，但不是标题党之类，不能复制，因为需要独创，没有创意观众就很容易腻的，试想，当很多人都知道这些案例的时候，是不是他们都会这样做？答案是肯定的，那么就比较难做出差异了。第二点，大企业大品牌具有相当的优势背景，由于品牌效应，尽管发布的是一片赤裸裸的广告业会获得较大的关注，而草根企业？尽管发布的是一片付出了心血的文章，但却无人问津。

当所有培训机构都列举一些经典案例（大企业大品牌）时，企业就以为学着他们做便也可以成功，随后企业们也尝试博客抢沙发赢奖品营销，也学着博客品酒营销，结果不如人意遭冷遇，埋怨为什么免费也没人要？接着就向培训公司诉苦和反映，那些方法都不管用等等……其实不是方法不管用，也不能说不好，就是自身缺乏意识和创新，同时也太过于依赖学习回来的知识，对此期望也过于偏高。在这里顺便做个小提示，其实那些培训机构在做案例分享或者做讲义整理的时候，可以多插一些成功的草根博客营销案例，他们的成功经历和方法才会适合草根企业，可以看看十大网商和十大博客他们。

写到这里，可能很多人会问，那博客发布信息增加搜索引擎收录不是博客营销？增加外链不是博客营销？是博客营销，不过不是最主要，可以跳过的，更不是最重要，可以忽略的。目前，博客是最好的网站增加外链途径，所以大部分企业开建博客无非就是增加外链而已，因为外链数量多了，意味着网站被收录的机会就大。那既然如此重要，为什么又说可以忽略和跳过？因为只要另外几点做到位，说实话，外链和收录比大量发布信息效果要好不知多少倍。

大企业大品牌的博客营销方式，我们草根企业几乎不能借鉴，我们无需在“如何借鉴上”花精力思考和钻牛角尖，那么草根企业又应该怎么做？大体总结出就是“找对方法后就扎扎实实去做”。

找对方法和走对方向很重要，所谓找对方法就是适合自己的发展方式，并不是说什么高招之类，就等于一件衣服，谁都赞美漂亮好看，但是不是每个人穿都好看？我想未必，合身才是最好看的。其实我一直都很不解一些草根企业模仿大企业大品牌模仿得那么的俗，明知模式走不通的，都要走下去，脑里只想着大企业的经验一定是对的……！博客营销一样，大企业怎么做草根企业就怎么做，方法都没错，但是没错并不代表处处都适合的呀。所以必须有自己的一套方法、策略才能谋得发展。

首先，我们以高一层的境界去理解博客营销，前面说过，其实无需过多着墨，博客营销其实很简单，卖思想卖人品，与传统营销密不可分，通过文字去暗示读者用户，软性的宣传企业和业务。所谓软性，我们可以理解一下软文的概念，其实就是间接，攻敌于无形，让读者无意的被笼在广告思维圈，看到这里，肯定有部分读者会反驳，说来说去不就是宣传广告嘛……！当然，所有一切都是以宣传为基础，但需要方法和技巧的，并不是赤裸裸的。那么具体我们如何做？有以下几点：

写博客文章，也太多人过于看得神秘，总是以为博客文章里需要暗藏些什么似的，其实不然。博客文章需要自然平实，包括产品文章和业务文章，并不是说产品文章就是一味的介绍产品而已，只要换个方式去描写，效果相差100倍。另外，很多写博客的人都困惑的是写出来的文章无人问津，没人看就没宣传可然，表面上是，不过稍微的意识一下，其实也不然，因为博客营销本身首先第一关就是要获得读者对我们的信任，获得信任之后，后面的工作能够迎刃而解，然而信任都是靠长期的积累，若果能够长期坚持下去，至少可以每月更新好几篇文章，相信不久下来多多少少都会积累了一些的读者，你更新证明还活着，因此，你的坚持会获得别人的信任，因为能坚持的人不多。下面说说写文章的技巧：

写产品文章，不要直白产品的功能和用途，以客户的反馈和体验、评论为切入点，意思就是必须站在第三方立场去说事，必须中立和客观，更重要的是真实。我们可以这样做：我们收到客户对产品任何的反馈，不管是正面还是负面，差评还是好评，这都是最好的题材，再比如说客户对一个水杯的质量不太满意，我们就可以这样娶标题进行撰写，标题为“如何处理客户对产品的投诉？，首先从标题上看，就已经是一篇有价值和有借鉴性的文章了，必定会受欢迎的，标题想好，接着就是内容的编写，很多人又困惑不知道怎么写了，很简单，你把处理投诉的过程用比较有逻辑性和通俗一点的文字表达出来就可以了，标题这样设置，我想文章内容怎么写也不会有广告嫌疑了。那么具体怎么写？我们先来看一个例子：

乔伊思女装，是一个不折不扣的草根服装品牌，只是在阿里巴巴混得很不错，从销售一般到销量冠军，博客营销起到了大臂之力，至于它具体怎么做，我想一下子说不清，还是继续谈谈它是如何写博客文章的。乔伊思的博客，几乎发动全公司的工作人员一起经营打理，每个员工都要写博客，并且把写博客也列入工作考核里，所以他们的客户也非常关注它的博客，博客就是一个对乔伊思最好的了解途径！无论是怎么优秀的企业总会有疏忽和不足之处的，乔伊思有一位客户进了一批货后卖完再继续进了第二批，但是发现第二批的质量不如第一批的好，客户要反馈是很正常不过了，不过客户不是通过打电话投诉，而是通过博客留言方式反馈，意味着什么？意味着凡是看乔伊思博客的人都会看到这条负面的评论，从而会潜移默化的受到影响！如果删除，就是逃避责任和不忠诚，那怎么做？乔伊思不删除评论，直接坦诚面对客户提出的异议，并且针对评论撰写了一篇文章给予最好的回应，首先是对这批服装出现质量问题表示歉意，并且愿意对这批货物负一切责任，然后真诚客气地解释为什么会出现这样的情况，一定要诚恳并且对客户做出一些承诺，最后，不仅得到客户的理解和谅解，而且增强了客户对他们的信任和支持。

提醒大家的是，很多企业他们遇到客户的投诉，最忌的是公开，毫不忌言说，很大程度要么就是逃避责任，要么就是害怕处理不当进而加剧恶化，其实不然，我们公开处理，客户反而会真实的看到我们对此事情负责，就连每一个处理细节都看到，能不让客户感动吗？不过负面信息处理得当就会得到升华，处理不当后果也不堪设想。一定要坦诚，付出的是真意。

除此之外，我们需要对软文的理解提高一个层次！自从脑白金的软文营销爆发之后，得到了极大的关注，很多的企业也纷纷尝试软文营销，也就是从此开始有了软文的概念。脑白金的软文有恐吓、悬念、猜疑的特点，完全是标题党的软文，谁都说是傻傻的广告，马云也说是傻傻的，很白痴的广告，但为什么还会有那么多人关注？肯定是有原因的，在这里也不详谈。首先它成功，软文的写法只是一个原因，另外重要的是它铺天盖地的投放媒体，影响范围广，而且读者都是那些容易被忽悠的百姓。我很反对现在的企业还是那么的崇拜脑白金的软文，总是不遗余力的去模仿再模仿，我不敢说不管用，但要想起到脑白金这样的效果或者一半的效果，不投放媒体是很难达到的，那么对于草根企业来说显然是不实际的，所以我们必须要换个概念。

把软文理解为脑白金模式软文，过时了，俗不可耐。随着大众对广告的抗拒感在加剧，尤其是软文，通常都是被跳阅甚至直接关闭的。所以我们对软文概念的理解需要更新一下，杜绝标题党，没多大把握的文章千万别过多的介入广告和虚构的内容，原则是先提供价值再软性提及需要宣传的字眼。

好了，我们继续谈博客营销。那么模仿大企业做法不行，我们草根企业应如何做呢？

&lt;strong&gt;一：官方博客&lt;/strong&gt;

博客营销分为很多的博客类型，有个人博客、企业博客、员工博客、产品博客等等，通常个人博客主要是分享生活和工作上的点滴，而企业博客多数是传递企业的文化理念这些，产品博客则是以产品为主的博客，目前最为流行的是个人博客和企业博客，产品博客比较少有。那么，哪一类的博客才适合草根企业呢？都适合，不过我推荐企业博客。

因为企业博客的概念比较泛一点，可谈范围也比较广，所以草根企业不要老是开博客来发布那些所以的广告，需要的是开通几个博客当做企业博客，推荐的平台是新浪、价值网、企博网等，新浪的高权重，价值网的专业，企博网的准定位，所以是不错的选择！开通企业博客，我们需要用心更要坚持去打理维护，因为它就是企业的一张脸，那么该怎么做？写些什么？

首先，我们把这博客命名为XXX企业官方博客，会获得读者用户的重视，另外会增强信任力和美誉度。该写些什么？前面提过，可以分享企业的创业历程、文化、理念以及各方面的技巧都可以，如果你们真正能够遵循这几点的话，我相信你的企业博客会很出色，因为读者很需要这类型的资讯。怎么写？再次悟醒大家，千万不要把企业博客也看得太过神秘，更不需要担心什么文采之类，我相信只要用心去写肯去写，文采就不在话下了。我们看看一则案例，成都市的大司南咨询公司的企业博客，在同行内算是比较成功运用博客营销的公司，现在博客已经取代了公司网站，因为90%的业务都是从博客来的，怎么做到？一、博客由企业负责人或高层打理，即是撰写文章，大司南公司博客都是由老板负责撰写，就这一点就已经足以赢得读者的关注青睐，那么他都是写些什么？很简单，回答网友的提问、对事物的见解和评论、领域上的知识分享等等，首先，在博客上开建一个网友问答专栏，网友可以任意的提问，然后大司南负责人会通过文章的形式给予网友的答复，其次是自己的所见所闻，定期的撰写领域内的专业文章，这样可以巩固着博客的主题。大司南公司还有一点值得我们去学习的是天天都更新一篇文章，让读者不断关注，另外就是没有让读者白来。目前，大司南博客的流量为三百二十五万，单篇文章流量超过1300点击，并且获得很多的有效评论，这几点都是博客营销效果的重要考核指标。

大司南公司博客绝对不是名博，大司南公司是一家很平常不过的咨询公司，但他就是把博客营销发挥到极致。我相信如果每家企业都这么用心去经营好自己的博客，相信也会像大司南甚至比大司南做得要好！要做好，我们必须切忌急功近利，第二就是有足够的耐性和耐心，用心撰写好每一篇文章。

其次，我们不妨开建一个员工博客，何为员工博客？就是让员工管理负责撰写文章，话题以员工的生活工作为主！为什么开建员工博客？一是可以发挥员工的积极性，二是通过展示员工的风采会更容易获得认可和信赖，其实我们也可以想象，用现实一点的标准去衡量一家企业，员工利益越大化就越能被认可，所以我们可以让员工们参加完每次的各项培训、公司活动、什么评选之后都通过博客记录下来，并且图文并茂，渲染力更强一点。我们看一则案例：

单仁资讯有限公司，是一家做网络营销培训的企业，同样也不是名牌，也不是大企业。但小企业也有很多方面是很优秀的，就如它的员工博客是做得很棒的，很值得我们去学习。相信很多人说，他们是做网络营销培训的，当然会有自身优势，做得好一点都不奇怪，其实不然，你可以看看他们的员工博客，你会发现，很普通很普通，再次可以看出其实博客营销不复杂，真的需要平实与自然。单仁资讯员工博客他们写的都是什么？主要是员工们的生活上工作上的分享，看了什么好的书？看了什么好的电影？都可以写在博客上与大家分享，单仁资讯员工还把在公司获得的荣誉、奖励都写上去，表现一下自己。其次就是关心一些社会时事，比如最近的玉树地震事件，单仁资讯的员工纷纷写博客以表对玉树灾区的关心和关怀，把公司的捐款活动同时写上博客里，那么这将会体现一家企业的价值观和责任感，另外有趣的是那些员工也叫他们的父母多关注博客，有你儿女的作品，会看到我们的照片，那么这样就可以解决了家长对公司的顾虑，企业形象就大大提升了。

如果员工博客经营得好，在积累美誉度环节上是胜于其他途径的，员工博客更容易体现的是形而上的东西，比如信任、认知度等。

&lt;strong&gt;二：专栏博客&lt;/strong&gt;

很多专家的博客都被称为专栏，大意就是专业撰稿的栏目，用专栏去形容，形象上和级别会提高许多。一听到专栏之后，肯定很多人会认为高不可攀，总以为只有专家才能开建专栏，不是专家怎么能开专栏？若果要是专家才能开建专栏，那么笔者就不会在全球品牌网、博锐网、中国营销传播网上有专栏了，我是一个普通得不能再普通的一位营销人而已，不过由于我爱好分享我的经验经历这些，所以每发表的一些文章都会被那些网站收录及转载，那些编辑就干脆叫我开通专栏，随后也越来越多的平台邀请我开建专栏。

专栏博客平台网站，权重很高，也有一定的权威和影响力！比如著名的有销售与市场、全球品牌网、博锐网、中国营销传播网、艾瑞网等等，几乎每一个行业或产业都会有几个专栏博客平台，他们聚集了许多的行业专家，在业界内都有一定的话语权，成为了很多商家、经理、销售总监等的营养吸收基地，所以如果能长期坚持并且是行业或产业的专栏撰写先行者，会很快成为该行业或产业的领导者，至少有一定的话语权。

专栏并不都是要求文章需要很有深度和高度，只要有思想和价值都可以登上专栏，所以通过专栏发布文章，对扩建人脉和品牌建设能起到推波助澜的作用。那么怎么写？写什么？

首先，我们可以去一些专栏博客平台上看看，可以到全球品牌网、销售与市场、博锐网、中国营销传播网这些平台上参考一下别人是写什么，怎么写的。你会发现里面的作者并非都是我们耳熟的专家，其实许多都是那些草根企业的老板、营销总监、经理人他们，然而文章能登上专栏网站，都会被那些读者看做为专家，这就是一种其他不可比拟的绝对优势了。当然我们不要充着专家而撰写专栏，我们理念必须还是为读者提供有价值的资讯，我们可以将官博（即企业博客“和员工博客进行整合，在两者基础上再撰写一些专业而具实战性的文章，如果都是撰写领域专业文章，会显得有点枯燥，更重要的是仅通过专业文章只能让读者他们了解你的知识但不了解你企业，因为我们最终目的是让别人信任于我们企业，所以结合员工博客和企业博客是最佳的方法。我们先看一则案例：

“忆典定制”电子商务公司，是一家经营个性礼物定制业务的企业，他起步晚，但比先行企业做得优秀，他规模不算大，但很专业。他的成功不仅是因为专业和到位的管理，重要一点就是他运用了专栏营销方式。忆典定制网在艾瑞网、全球品牌网、价值中国网上都开有专栏，并且命名为忆典定制团专栏，围绕着个性定制这个行业发布文章资讯，话题大到产业状况、趋势，细到实战经验、营销、经营方法等。为什么不见其他个性定制企业开专栏？机会就在这里，本来权威网站就是拥有话语权，那么在里面只有自己关注个性定制这个产业，而且只专注于这个产业，其他不多谈，这就显得专业了。忆典定制成为这个产业输出最多各类资讯的企业，意味着什么？意味着会较大程度上获得读者的关注和借鉴信任，忆典定制长期发布产业的相关资讯，获得了其他网站的转载和成为机构、研究员的文献参考对象，并且长期关注，达到这样境界了，话语权已经夺得，宣传推广就更加不在话下了。

提示：若果你发现你置身的领域、行业、产业还没开展专栏营销的时候，你必须好好把握抓紧这个机会，因为专栏有着很多其他方式不可比拟的独特优势，就像忆典定制一样，发现别人没做，自己就马上行动，开建专栏长期撰写产业领域文章，巩固乃至提高企业在领域内的地位，争取做领域的领军企业和话语权。

注意：在专栏介绍上一定要明晰写上关于企业或本人的相关资料，这是最重要最宝贵的资源。

&lt;strong&gt;三：第三方博客&lt;/strong&gt;

何为第三方？顾名思义就是企业及内部人士外的旁观者，可以是评论、客户、读者、用户，那么第三方博客就是以第三方名义开建的博客。以第三方立场谈论的一切观点都是客观的公立又公正的，所以很多读者都以第三方的说法作为论据和观点参考，因此我建议开建第三方博客。但是我不主张内部人士以其他名义虚假开建第三方博客，那么怎么做？可以联系上一些业界上的朋友或者其他非竞争企业开建博客，博客大家一起管理，不同领域人士的可以对不同领域做第三方评论，比如说做化工的，可对评论礼品行业的，做礼品的可以评论饮料行业的，所以我们企业间可以相互做评论。虽然不会很专业，不过观点绝对是客观的！客观就会获得尊重和关注！

在撰写评论文章上我分享几个小技巧，虽然是评论文章，但也总不能违背规则而大裸广告的。说句实话，对于现在的尤其敏感的消费者来说，无论你的文章如何软、如何特技暗藏广告，字眼，消费者有时一眼就可以看穿了，不过如果文章要是有价值的话，我想消费者还是会乐意接受的。到底需要什么技巧？还是那句先重自然平实，然后我们在提及宣传字眼就需要懂一些心理学上的知识了，跟消费者打打心理战。比如你写一篇评论某家企业的创业经历，虽说是创业经历分享，不过如果文章要是过分地广告成分，也是被沦落扫过，这里的广告就是多次提及公司名称和产品，其实一篇文章里我们只出现一次宣传字眼就够了，而且需要很巧妙表现出来，比如我之前写一家红酒企业的创业经历分享的文章，我是这样做的。

1、提及公司名称字眼：比如说他们在筹备公司前，为公司想一个好的名字是必然的，所以我们可以这样写，“老板已经决定从事XX业务，进军XX行业，但必须想一个好的名字，可老板一个人精力有限，所以就叫上所有员工们一起想，通过会议后，初步定下的名字叫”XXXX公司“，日后有好的再定。

以“为公司名字为切入点，是一个很好的切入点，让消费者根本看不出是在宣传，反而会说连这些过程也分享，让我们收获得更多。

2、提及业务字眼：一家公司的业务模式必定要定位好才能获得长远发展，我们怎么提及？同上面一样，可以在想好公司名字后面续上，可以这样说“由于公司现在做的是XXX的中国代理，如果要是开发省级代理的话，又XXX，如果要开发全国经销商的话，但是……，所以还是以为加盟为主批发为辅。

以讨论公司的业务模式为切入点，同样不会让消费者视为广告，因为这是一个策略分析的过程，其中的细节是很值得学习的。

3、介绍团队：从文字广告来论，宣传一个人比宣传一件产品容易，这是不言而喻的！现在很多那些培训师讲师的介绍，有部分都是不属实的，但是至于你怎么介绍，消费者是不追求的，不过产品的吹牛，就有点看不过去了。为了获得消费者更发自内心认可，我们也尽量低调低调，对于团队宣传，我们可以不用那种直白的介绍，那怎样做？继续创业文章我们可以这样：

“过去公司都非常困难，营业额下降了许多，所以公司不得不调整待遇，此时我们充满屈辱感，不过十分庆幸的是这团队是一支肯于公司同甘共苦、共同进退的团队，与公司度过逆境，是他们，公司才能生存下来。

&lt;strong&gt;四：优化类博客&lt;/strong&gt;

什么叫优化类博客？其实就是前面提到的提高搜索引擎排名和收录的博客，前面是不赞成，为什么现在又要提及？因为他们方法有错，不是这个方式有错，因为不是批量发布的就可以随意，随意起来就没有效果，干脆不要做，因为你批量发布文章也很需要时间的，既然是批量发布，时间也花上了，那么就再多花一些时间干脆也把细节做好吧。怎么做？

我不建议每一个博客平台上都开博客，只需挑选一些比较主流的平台上开建博客就可以了，有几个指标可以判断平台的质量，一个是世界排名1W名内，二是PR值（谷歌对网站评分的算法）要在5或6以上，三是收录情况，如果这些指标都达到的话，就是一个权重比较高的博客平台。每个平台注册1个账号以上，然后发布资讯，当然不是业务信息了，所以我说方法有错就是这样，那发布什么？可以发布行业的相关知识、使用方法、维护方法等等这些，比如你是做礼品礼物的，你可以发布关于如何送礼？礼物的挑选技巧、送礼礼仪、送礼原则、送礼文化等一系列消费者关注的资讯。然后每个博客名称可以命名为你的相关业务名称，比如说“生日礼物”、“节日礼物”等等，那么如果博客被收录了，权重高的话别人搜索生日礼物的时候就会出现你的博客，另外在编辑文章的时候，可以附上网站链接，在文章底部另外起行注明“浏览更多相关信息，请登录xxx网站”，千万不要说需要购买XXX，请登录网站，否则会适得其反。

&lt;strong&gt;五：博客撰写细节&lt;/strong&gt;

细节决定成功，也有很多人反对这个说法，但我个人认为是有道理的，很多细节都会起到蝴蝶效应。对博客来说，其实里面是有很多的细节需要做好，做好细节，意外惊喜层出不穷。哪些是博客细节？有以下几点：

1、字体风格 所有人的博客都是大同小异，字体更是如此，多数是使用宋体字，也许是顺从大众而已了，不过宋体字看上去是比较舒服的，这无可否认。那么要说的是什么？我们可以使用另一种字体风格，为什么？就是提高认知度。只要我们使用一种有别于其他博客字体风格，我想是很容易在众多博客中脱颖而出的！

这其实很容易理解，当别人进来你博客的时候，比如你使用的字体是楷体，可能一开始读者会不太习惯，读起来会有点不舒畅，但一旦坚持下去，读者就会适应，并且很容易把博客牢固在读者脑海中，很简单，如果读者每读30个博客，其他博客字体风格都一样，只有你的字体是不同的，那么这就是特色和差异了，读者就会记住这一点，我们可以把这一点说为认知度，楷体字的博客，马上想到的是你的博客。

2、排版风格 博文的排版无非都是直接常规法了，分段分行而已，又是大同小异，其实如果我们稍微在这点下点功夫，同样可以出胜，怎么做？

我们可以利用博客系统文字对话框的模板编辑，选择可以图文并茂的风格，具体看编号，使用模板的图文并茂方式比普通的插图方式专业正规多了，通常这种排版的效果是“内容页内右上角、左上角、中左边、右左边插入图片，像杂志和报纸一样，我们想想，如果博客每篇文章都能做到这个份上，能不吸引读者吗？很可能100个甚至更多博客里，就只有你的博客是如此正规专业的了

以上两点需要的是持之以恒。

博客营销找对方法然后坚持用心去做，其实不难的！不能把博客营销看作一场简单的小游戏，但也不能把博客营销看得深不可测，还是常态看待最好，祝你成功。

来源：李则敬投稿

转自 &lt;a href=&#34;http://www.williamlong.info/archives/2202.html&#34; target=&#34;_blank&#34;&gt;月光博客&lt;/a&gt;

&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>